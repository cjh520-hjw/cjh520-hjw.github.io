<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>计网 on 嬉皮士-Hippie</title>
        <link>https://cjh520-hjw.github.io/categories/%E8%AE%A1%E7%BD%91/</link>
        <description>Recent content in 计网 on 嬉皮士-Hippie</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <copyright>嬉皮士-Hippie</copyright>
        <lastBuildDate>Wed, 05 Nov 2025 16:52:57 +0800</lastBuildDate><atom:link href="https://cjh520-hjw.github.io/categories/%E8%AE%A1%E7%BD%91/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>计网</title>
        <link>https://cjh520-hjw.github.io/p/%E8%AE%A1%E7%BD%91/</link>
        <pubDate>Mon, 27 Oct 2025 00:00:00 +0000</pubDate>
        
        <guid>https://cjh520-hjw.github.io/p/%E8%AE%A1%E7%BD%91/</guid>
        <description>&lt;img src="https://cjh520-hjw.github.io/images/%E5%9F%8E%E5%B8%82/shenzhen.jpg" alt="Featured image of post 计网" /&gt;&lt;h1 id=&#34;第一章-概述&#34;&gt;&lt;strong&gt;第一章 概述&lt;/strong&gt;
&lt;/h1&gt;&lt;h2 id=&#34;一因特网概述&#34;&gt;&lt;strong&gt;一、因特网概述&lt;/strong&gt;
&lt;/h2&gt;&lt;h3 id=&#34;1网络互连网互联网和因特网&#34;&gt;&lt;strong&gt;1.网络、互连网（互联网）和因特网&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;网络由若干&lt;strong&gt;结点&lt;/strong&gt;和连接这些结点的&lt;strong&gt;链路&lt;/strong&gt;组成。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;多个网络还可以通过路由器互连起来，这样就构成了一个覆盖范围更大的网络，即互联网（或互连网）。因此，互连网是“网络的网络”。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;因特网是世界上最大的互连网络。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Internet 和 internet的区别 ：&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;internet是一个通用名字，泛指由多个计算机网络互联而成的网络。这些网络之间的通信协议是可以任意的。&lt;/p&gt;
&lt;p&gt;Internet是一个专用名词，它指当前全球最大的、开放的、由众多网络相互连接而成的特定计算机网络，它采用TCP/IP协议族作为通信规则，前身为美国的ARPANET。&lt;/p&gt;
&lt;h3 id=&#34;2因特网的组成&#34;&gt;&lt;strong&gt;2.因特网的组成&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;因特网由&lt;strong&gt;边缘部分&lt;/strong&gt;和&lt;strong&gt;核心部分&lt;/strong&gt;组成
&lt;ul&gt;
&lt;li&gt;边缘部分：即主机，由用户直接使用。&lt;/li&gt;
&lt;li&gt;核心部分：由异构网络和连接这些网络的路由器构成。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;二电路交换分组交换和报文交换&#34;&gt;&lt;strong&gt;二、电路交换、分组交换和报文交换&lt;/strong&gt;
&lt;/h2&gt;&lt;h3 id=&#34;1电路交换&#34;&gt;&lt;strong&gt;1.电路交换&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;• 电路交换的过程分为三步：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;建立连接：分配通信资源&lt;/li&gt;
&lt;li&gt;通话：一直占用通信资源&lt;/li&gt;
&lt;li&gt;释放连接：归还通信资源&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;• 计算机之间的数据传送是&lt;strong&gt;突发式&lt;/strong&gt;的，当使用电路交换来传送计算机数据时，其线路的传输效率一般都会很低。&lt;/p&gt;
&lt;p&gt;• 电路交换不具备差错检验的能力。&lt;/p&gt;
&lt;h3 id=&#34;2分组交换&#34;&gt;&lt;strong&gt;2.分组交换&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;• 分组交换即将&lt;strong&gt;报文段&lt;/strong&gt;分为若干组，在每组加上&lt;strong&gt;首部&lt;/strong&gt;，再进行传输&lt;/p&gt;
&lt;p&gt;• 优点：&lt;/p&gt;
&lt;p&gt;a. 没有建立连接和释放连接的过程&lt;/p&gt;
&lt;p&gt;b. 分组传输过程中逐段占用通信链路&lt;/p&gt;
&lt;p&gt;c. 交换节点可以为每一个分组独立选择转发路由，是的网络由很好的生存性。&lt;/p&gt;
&lt;p&gt;• 缺点：&lt;/p&gt;
&lt;p&gt;a. 分组&lt;strong&gt;首部&lt;/strong&gt;带来了额外的传输开销。&lt;/p&gt;
&lt;p&gt;b. 交换节点存储转发分组会造成一定的&lt;strong&gt;时延&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;c. 无法确保通信时端到端通信资源全部可用，信息量大时可能造成网络拥堵。&lt;/p&gt;
&lt;p&gt;d. 分组可能会出现失序和丢失等问题。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.报文交换&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 报文交换是分组交换的前身。&lt;/p&gt;
&lt;p&gt;• 报文交换中，&lt;strong&gt;报文被整个地发送&lt;/strong&gt;，而不是拆开成若干个分组进行发送。&lt;/p&gt;
&lt;p&gt;• 交换节点将报文&lt;strong&gt;整体接受完成后&lt;/strong&gt;才能查找转发表，将整个报文转发到下一个节点。&lt;/p&gt;
&lt;p&gt;• 报文交换比分组交换带来的转发&lt;strong&gt;时延要长很多&lt;/strong&gt;，需要交换节点具有的&lt;strong&gt;缓存空间&lt;/strong&gt;也大很多。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4.三种交换方式对比&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 报文交换和分组交换都&lt;strong&gt;不需要建立连接&lt;/strong&gt;，在传送计算机的&lt;strong&gt;突发&lt;/strong&gt;数据时，可以提高通信线路的利用率。&lt;/p&gt;
&lt;p&gt;• 将报文构造成若干个更小的分组进行分组交换，比将整个报文进行报文交换的&lt;strong&gt;时延&lt;/strong&gt;要小，并且还可以避免太长的报文长时间占用链路，有利于&lt;strong&gt;差错控制&lt;/strong&gt;，同时拥有更好的灵活性&lt;/p&gt;
&lt;h2 id=&#34;三计算机网络的定义和分类&#34;&gt;&lt;strong&gt;三、计算机网络的定义和分类&lt;/strong&gt;
&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;1.计算机网络的定义&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 计算机网络主要是由一些通用的、可编程的硬件互连而成的，而这些硬件并非专门用来实现某一特定目的(例如，传送数据或视频信号)。这些可编程的硬件能够用来传送多种不同类型的数据，并能支持广泛的和日益增长的应用。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.计算机网络的分类&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 交换方式：电路交换、报文交换、分组交换&lt;/p&gt;
&lt;p&gt;• 使用者：公用网、专用网&lt;/p&gt;
&lt;p&gt;• 传输介质：有线网络、无线网络&lt;/p&gt;
&lt;p&gt;• 覆盖范围：广域网(WAN)、城域网(MAN)、局域网(LAN)、个域网(PAN)&lt;/p&gt;
&lt;p&gt;• 拓扑结构：总线型、星型、环型、网状型&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;四、计网的性能指标&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.速率&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 比特是计算机中数据量的基本单位，一个比特就是二进制数字中的1或0。&lt;/p&gt;
&lt;p&gt;• 速率是指数据的传送速率，即&lt;strong&gt;每秒传送多少个比特&lt;/strong&gt;，也称为数据率或&lt;strong&gt;比特率&lt;/strong&gt;。基本单位是比特/秒（bit/s）。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.带宽&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 带宽在模拟信号系统中的意义：&lt;/p&gt;
&lt;p&gt;￮ 某个信号所包含的各种不同频率成分所占据的&lt;strong&gt;频率范围的宽度&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 单位:Hz(kHz,MHz,GHz).&lt;/p&gt;
&lt;p&gt;• 带宽在计算机网络中的意义：&lt;/p&gt;
&lt;p&gt;￮ 用来表示网络的&lt;strong&gt;通信线路所能传送数据的能力&lt;/strong&gt;，即单位时间内从网络中的某一点到另一点所能通过的&lt;strong&gt;最高数据率。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;带宽与发送时延有关，而与传播时延无关！&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 单位:b/s（kb/s，Mb/s，Gb/s）&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.吞吐量&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 吞吐量是指在&lt;strong&gt;单位时间内通过某个网络或接口的实际数据量&lt;/strong&gt;。吞吐量常被用于对实际网络的测量，以便获知到底有多少数据量通过了网络。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4.时延&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 时延是指数据从网络的一端传送到另一端所耗费的时间，也称为延迟或迟延。数据可由一个或多个分组、甚至是一个比特构成。&lt;/p&gt;
&lt;p&gt;• 时延的组成：&lt;strong&gt;发送时延、传播时延、排队时延、处理时延&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 发送时延=分组长度（b）/发送速率（b/s）&lt;/p&gt;
&lt;p&gt;￮ 传播时延=信道长度（m）/信号传播速率（m/s）（不同介质有不同信号传播速率）&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps1.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;5.时延带宽积&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 时延带宽积是&lt;strong&gt;传播时延&lt;/strong&gt;和&lt;strong&gt;带宽&lt;/strong&gt;的乘积。&lt;/p&gt;
&lt;p&gt;￮ 传播时延表示&lt;strong&gt;传播的时间&lt;/strong&gt;，带宽表示&lt;strong&gt;每秒传送的数量&lt;/strong&gt;，相乘大概为传输的数据量。&lt;/p&gt;
&lt;p&gt;• 链路的时延带宽积也称为&lt;strong&gt;以比特为单位的链路长度。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 简单来讲：&lt;strong&gt;当信号传播到最远端时，整个链路上充斥的比特数量。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;6.往返时间&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 往返时间RTT是指：从发送端发送数据分组开始，到发送端收到接收端发来的相应确认分组为止，总共耗费的时间。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;7.利用率&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 链路利用率：某条链路有百分之几的时间是被利用的。&lt;/p&gt;
&lt;p&gt;• 网络利用率：网络中所有链路的链路利用率的加权平均。&lt;/p&gt;
&lt;p&gt;• 当某链路的利用率增大时，该链路引起的时延就会迅速增加。所以&lt;strong&gt;利用率并非越高越好&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;8.丢包率&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 丢包率是指在一定的时间范围内，传输过程中丢失的分组数量与总分组数量的比率。&lt;/p&gt;
&lt;p&gt;• 分组丢失主要有两种情况：&lt;/p&gt;
&lt;p&gt;a. 分组在传输过程中出现&lt;strong&gt;误码&lt;/strong&gt;而被丢弃。&lt;/p&gt;
&lt;p&gt;b. 节点交换机根据&lt;strong&gt;丢弃策略&lt;/strong&gt;主动丢弃分组。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;五、OSI参考模型、TCP/IP模型&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps2.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.物理层&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 物理层任务：实现相邻节点之间&lt;strong&gt;比特的传输&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 物理层不参与数据的封装。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.数据链路层&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 链路层传输以“&lt;strong&gt;帧&lt;/strong&gt;”为单位&lt;/p&gt;
&lt;p&gt;• 链路层任务：确保相邻节点之间的链路&lt;strong&gt;逻辑上无差错&lt;/strong&gt;。包含以下功能：&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;差错控制&lt;/strong&gt;：检错+纠错&lt;/p&gt;
&lt;p&gt;￮ 流量控制：协调两个节点的速率&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.网络层&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 网络层任务：把分&amp;quot;&lt;strong&gt;分组&lt;/strong&gt;&amp;ldquo;从源节点转发到目的节点。包含以下功能：&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;路由选择&lt;/strong&gt;：构造并维护路由表，决定分组到达目的节点的最佳路径。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;分组转发&lt;/strong&gt;：将“&lt;strong&gt;分组（数据报）&lt;/strong&gt;”从合适的端口转发出去。&lt;/p&gt;
&lt;p&gt;￮ 拥塞控制：发现网络拥塞，并采取措施缓解拥塞。&lt;/p&gt;
&lt;p&gt;￮ 网际互连：实现异构网络互联。&lt;/p&gt;
&lt;p&gt;￮ 其他功能：差错控制、流量控制、连接建立与释放、可靠传输管理&lt;/p&gt;
&lt;p&gt;• OSI参考模型在&lt;strong&gt;网络层&lt;/strong&gt;支持&lt;strong&gt;无连接和面向连接&lt;/strong&gt;的通信，但在&lt;strong&gt;传输层&lt;/strong&gt;仅支持&lt;strong&gt;面向连接&lt;/strong&gt;的通信。• TCP/IP模型在网络层仅有&lt;strong&gt;无连接&lt;/strong&gt;的通信，而在传输层支持&lt;strong&gt;无连接和面向连接&lt;/strong&gt;的通信。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4.传输层&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 传输层传输以“&lt;strong&gt;报文段&lt;/strong&gt;”为单位。&lt;/p&gt;
&lt;p&gt;• 传输层任务：实现&lt;strong&gt;端到端&lt;/strong&gt;通信（“端”指“&lt;strong&gt;端口&lt;/strong&gt;”）。包含以下功能：&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;复用和分用&lt;/strong&gt;：发送端几个高层实体复用一条低层的连接，在接收端再进行分用&lt;/p&gt;
&lt;p&gt;￮ 其他功能：差错控制、流量控制、连接建立与释放、可靠传输管理&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;5.会话层&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 会话层任务：管理进程间会话。功能：&lt;strong&gt;会话管理、&lt;strong&gt;提供了同步服务&lt;/strong&gt;。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;6.表示层&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 表示层任务：解决不同主机上信息表示不一致问题。功能：&lt;strong&gt;数据格式转换。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;七、计算机网络体系结构分层思想举例&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps3.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 逐层封装、逐层解封&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;八、计算机网络体系结构中的专业术语&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.实体&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 实体指任何可发送或接收信息的硬件或软件进程&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;对等实体&lt;/strong&gt;指通信双方相同层次中的实体&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.协议&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 协议是控制两个对等实体在“&lt;strong&gt;水平方向&lt;/strong&gt;”进行“&lt;strong&gt;逻辑通信&lt;/strong&gt;”的&lt;strong&gt;规则&lt;/strong&gt;的集合。&lt;/p&gt;
&lt;p&gt;• 协议的&lt;strong&gt;三要素&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;语法&lt;/strong&gt;：定义所交换信息的&lt;strong&gt;格式&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;语义&lt;/strong&gt;：定义通信双方所要完成的&lt;strong&gt;操作&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;同步&lt;/strong&gt;：定义通信双方的&lt;strong&gt;时序关系&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.服务&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 在协议的控制下，&lt;strong&gt;两个对等实体在水平方向的逻辑通信使得本层能够向上一层提供服务&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 要实现本层协议，还需要使用下面一层所提供的服务。&lt;/p&gt;
&lt;p&gt;• 协议是“&lt;strong&gt;水平&lt;/strong&gt;”的，而服务是“&lt;strong&gt;垂直&lt;/strong&gt;”的。&lt;/p&gt;
&lt;p&gt;• 实体看得见下层提供的服务，但并不知道该服务的具体协议。下层协议对上层的实体是“&lt;strong&gt;透明&lt;/strong&gt;”的。&lt;/p&gt;
&lt;p&gt;• 上层要使用下层提供的服务，必须通过与下层交换一些命令，这些命令称为服务原语。&lt;/p&gt;
&lt;p&gt;• 对等层次之间传送的数据包称为该层的&lt;strong&gt;协议数据单元&lt;/strong&gt;（&lt;strong&gt;PDU&lt;/strong&gt;）&lt;/p&gt;
&lt;p&gt;• 同一系统内层与层之间交换的数据包称为&lt;strong&gt;服务数据单元&lt;/strong&gt;（&lt;strong&gt;SDU&lt;/strong&gt;）&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;第二章 物理层&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;一、物理层概述&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 物理层“&lt;strong&gt;透明&lt;/strong&gt;”传输比特流，即数据链路层“看不见”物理层究竟使用的是什么方法来传输比特流。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.物理层接口特性&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 机械特性：形状尺寸、引脚数目与排列。&lt;/p&gt;
&lt;p&gt;• 电气特性：信号电压范围。&lt;/p&gt;
&lt;p&gt;• 功能特性：规定接口电缆的各条信号线作用，&lt;strong&gt;指明某条线上出现某一点电平的电压的意义&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 过程特性：规定爱信号线上传输比特流的一组操作过程，包括各信号间的时序关系。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;二、物理层设备与其下的传输媒体&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.双绞线&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 主要构成：两根导线相互绞合而成。&lt;/p&gt;
&lt;p&gt;• 抗干扰能力：较好。&lt;strong&gt;绞合、屏蔽层&lt;/strong&gt;可以提升&lt;strong&gt;抗电磁干扰能力&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 应用：今年局域网、早期电话线。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.同轴电缆&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 主要构成：&lt;strong&gt;内导体&lt;/strong&gt;（用于传输信号）+&lt;strong&gt;外导体屏蔽层&lt;/strong&gt;（用于抗电磁干扰）。&lt;/p&gt;
&lt;p&gt;• 抗干扰能力：好。屏蔽层带来良好的抗干扰性。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;同轴电缆比双绞线的传输速率更快，得益于它的高屏蔽性。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 应用：早期局域网、早期有线电视。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.光纤&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 主要构成：纤芯（高折射率）+包层（低折射率）。&lt;/p&gt;
&lt;p&gt;￮ 利用&lt;strong&gt;光的全反射特性&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 分类：&lt;/p&gt;
&lt;p&gt;a. 单模光纤：只有一条光线在一根光纤中传输，适合长距离传输，信号传输损耗小。&lt;strong&gt;光线向前传播，而不会产生多次反射。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;b. 多模光纤：多条光线在一根光纤中传输，适合近距离传输，远距离传输光信号容易失真。&lt;/p&gt;
&lt;p&gt;• 抗干扰能力：非常好。光信号对电磁干扰不敏感。&lt;/p&gt;
&lt;p&gt;• 其他优点：信号传输损耗小、长距离传输时中继器少、节约布线空间&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4.无线传输介质&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 无线电波&lt;/p&gt;
&lt;p&gt;￮ 特点：&lt;strong&gt;穿透能力强、传输距离长、信号指向性弱&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 如：手机信号、wifi&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;微波通信&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 特点：&lt;strong&gt;频率带宽高、信号指向性强&lt;/strong&gt;、保密性差、&lt;/p&gt;
&lt;p&gt;￮ 如：卫星通信（卫星作为信号中继器，传播时延较大）&lt;/p&gt;
&lt;p&gt;• 其他：红外线通信、激光通信等 —— 信号指向性强&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;5.中继器&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 中继器只有两个端口。通过一个端口接收信号，将失真信号&lt;strong&gt;整形再生&lt;/strong&gt;，并转发至另一端口。&lt;/p&gt;
&lt;p&gt;• 仅支持&lt;strong&gt;半双工通信&lt;/strong&gt;（如果两端口同时发送信号，会导致“冲突”）&lt;/p&gt;
&lt;p&gt;• 中继器两个端口对应两个**“网段”**&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;6.集线器&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 本质上是多端口中继器。集线器将其中一个端口接收到的信号&lt;strong&gt;整形再生&lt;/strong&gt;，并转发至其他所有端口。&lt;/p&gt;
&lt;p&gt;• 集线器可以连接&lt;strong&gt;不同的传输介质&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 集线器连接的网络，&lt;strong&gt;物理上是星型拓扑，逻辑上是总线型拓扑&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 集线器&lt;strong&gt;只工作在物理层&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 各端口连接的节点&lt;strong&gt;不可同时发送数据&lt;/strong&gt;，会导致“冲突”&lt;/p&gt;
&lt;p&gt;• 集线器的N个端口对应N个**“网段”&lt;strong&gt;，各网段属于同一个&lt;/strong&gt;“冲突域”**&lt;/p&gt;
&lt;p&gt;• 集线器连接的各网段**“共享带宽”**&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;冲突域&lt;/strong&gt;：如果两台主机同时发送数据会导致“冲突”，则这两台主机处于同一个“冲突域”。处于同一冲突域的主机在发送数据前需要进行“&lt;strong&gt;信道争用&lt;/strong&gt;”&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;三、传输方式&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.串行传输和并行传输&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 串行传输：发送端和接收端之间只有一条数据传输线路，数据逐比特依次传输&lt;/p&gt;
&lt;p&gt;• 并行传输：发送端和接收端之间有多条数据传输线路。构成数据的多个比特，被分别安排在不同的数据传输线路上同时传输。&lt;/p&gt;
&lt;p&gt;• 短距离（如CPU内部）一般采用并行传输，远距离传输一般采用串行传输。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.同步传输和异步传输&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 同步传输：以&lt;strong&gt;比特&lt;/strong&gt;为传输单位，数据块以比特流的形式传输，字节之间没有间隔，也没有起始位和终止位。&lt;/p&gt;
&lt;p&gt;￮ 收发双方时钟频率的&lt;strong&gt;误差积累&lt;/strong&gt;造成比特信号采样时刻的严重偏移&lt;/p&gt;
&lt;p&gt;• 异步传输：以&lt;strong&gt;字节&lt;/strong&gt;为传输单位，但字节之间的时间间隔并不固定。为每个字节添加起始位和结束位。&lt;/p&gt;
&lt;p&gt;￮ 异步指&lt;strong&gt;字节之间异步&lt;/strong&gt;，即字节之间的时间间隔不固定。&lt;/p&gt;
&lt;p&gt;￮ 字节内的每个比特仍然要同步，即各比特的持续时间是相同的。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.单工、半双工和全双工&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 单向通信（&lt;strong&gt;单工&lt;/strong&gt;）&lt;/p&gt;
&lt;p&gt;￮ 只能有一个方向的通信，没有双向的交互。需要&lt;strong&gt;一条信道&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 如：无线电广播&lt;/p&gt;
&lt;p&gt;• 双向交替通信（&lt;strong&gt;半双工&lt;/strong&gt;）&lt;/p&gt;
&lt;p&gt;￮ 通信双方都可以发送信息和接收信息，但不能同时进行。需要&lt;strong&gt;两条信道&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 如：对讲机&lt;/p&gt;
&lt;p&gt;• 双向同时通信（&lt;strong&gt;全双工&lt;/strong&gt;）&lt;/p&gt;
&lt;p&gt;￮ 通信双方都可以同时发送信息和接收信息。需要&lt;strong&gt;两条信道&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 如：传统有线电话&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;四、编码与调制&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.编码与调制的基本概念&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;编码&lt;/strong&gt;：将 二进制数据 转化为 数字信号&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;解码&lt;/strong&gt;：将 数字信号 转化为 二进制数据&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;调制&lt;/strong&gt;：将 二进制数据 转化为 模拟信号&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;解调&lt;/strong&gt; ：将 模拟信号 转化为 二进制数据&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;码元&lt;/strong&gt;：在使用时间域的波形表示信号时，&lt;strong&gt;代表不同离散数值的基本波形&lt;/strong&gt;称为码元。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.常用编码方式&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;不归零编码****NRZ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 编码效率高，但存在同步问题，需要额外信号线传输&lt;strong&gt;时钟信号&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;归零编码****RZ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 在每个码元的中间时刻都会回归到&lt;strong&gt;零电平&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 将时钟信号用“归零”方式编码在了数据之内，这称为&lt;strong&gt;自同步信号&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 缺点：大部分数据带宽用来传输“归零”而浪费掉了，效率低。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;反向非归零编码****NRZI&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 电平&lt;strong&gt;跳变表示0&lt;/strong&gt;、电平&lt;strong&gt;保持不变表示1&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;曼彻斯特编码&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 码元&lt;strong&gt;中间时刻&lt;/strong&gt;的&lt;strong&gt;电平跳变&lt;/strong&gt;既表示&lt;strong&gt;时钟信号&lt;/strong&gt;，也表示&lt;strong&gt;数据&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;差分曼彻斯特编码&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 码元中间时刻的电平跳变&lt;strong&gt;仅表示时钟信号&lt;/strong&gt;，而&lt;strong&gt;不表示数据&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 数据的表示在于每一个码元&lt;strong&gt;开始处****是否有电平跳变：&lt;strong&gt;无跳变&lt;/strong&gt;表示1&lt;/strong&gt;，有&lt;strong&gt;跳变表示0&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 在传输大量连续1或连续0的情况下，差分曼彻斯特编码比差分曼彻斯特编码信号的变化少。&lt;/p&gt;
&lt;p&gt;￮ 在噪声干扰环境下，检测有无跳变比检测跳变方向更不容易出错。因此，差分曼彻斯特编码信号更易于检测。&lt;/p&gt;
&lt;p&gt;• 各编码方式波形图&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps4.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.常用调制方法&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;基本调制方法&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;1个码元只能包含1个比特信息。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps5.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;调幅（AM）或幅移键控（ASK）&lt;/strong&gt;：通过改变载波的&lt;strong&gt;振幅&lt;/strong&gt;来表示1/0。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;调频（FM）或频移调控（FSK）&lt;/strong&gt;：通过改变载波的&lt;strong&gt;频率&lt;/strong&gt;来表示1/0。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;调相（FM）或相移调控（FSK）&lt;/strong&gt;：通过改变载波的&lt;strong&gt;相位&lt;/strong&gt;来表示1/0。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;混合调制方法&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 将载波的&lt;strong&gt;相位和振幅&lt;/strong&gt;结合起来一起调制，如正交振幅调制QAM&lt;/p&gt;
&lt;p&gt;￮ 若调制出&lt;strong&gt;16&lt;/strong&gt;种码元，则每种码元可以对应表示4(&lt;strong&gt;以2为底取对数&lt;/strong&gt;)个比特信息&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;五、信道的极限容量（奈氏准则、香农公式）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1. 造成信号失真的主要因素&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 造成失真的&lt;strong&gt;因素：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 码元的传输速率：传输速率越高，信号经过传输后的失真就越严重。&lt;/p&gt;
&lt;p&gt;￮ 码元的传输距离：传输距离越远，信号经过传输后的失真就越严重。&lt;/p&gt;
&lt;p&gt;￮ 噪声干扰：噪声干扰越大，信号经过传输后的失真就越严重。&lt;/p&gt;
&lt;p&gt;￮ 传输媒体的质量：传输媒体的质量越差，信号经过传输后的失真就越严重。&lt;/p&gt;
&lt;p&gt;• 信道上传输的数字信号，可以看作是&lt;strong&gt;多个频率的模拟信号进行多次叠加&lt;/strong&gt;后形成的方波。&lt;/p&gt;
&lt;p&gt;• 如果数字信号中的高频分量在传输时受到衰减甚至不能通过信道，接收端收到的信号波形就失去了码元之间的清晰界限，这种现象称为&lt;strong&gt;码间串扰&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 如果信道的频带越宽，则能够通过的信号的高频分量就越多，那么码元的传输速率就可以更高，而不会导致码间串扰。&lt;/p&gt;
&lt;p&gt;• 但信道的频率带宽是有上限的，不可能无限大。因此，码元的传输速率也有上限。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.奈氏准测&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 奈氏准则&lt;strong&gt;限制了最高码元传输速率。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 在&lt;strong&gt;理想&lt;/strong&gt;低通信道的&lt;strong&gt;最高码元传输速率=2W****（波特/秒）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ W ：信道的&lt;strong&gt;频率带宽&lt;/strong&gt;（单位为Hz）&lt;/p&gt;
&lt;p&gt;￮ Baud：波特，即码元/秒&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;码元传输速率又&lt;/strong&gt;称为&lt;strong&gt;波特率&lt;/strong&gt;、调制速率、波形速率或符号速率。&lt;/p&gt;
&lt;p&gt;• 波特率与比特率有一定的关系：&lt;/p&gt;
&lt;p&gt;￮ 当1码元只携带1比特的信息量时，波特率（码元/秒）与比特率（比特/秒）在数值上是相等的。&lt;/p&gt;
&lt;p&gt;￮ 当1码元只携带n比特的信息量时，波特率（码元/秒）转化成比特率（比特/秒）时，数值要乘以n。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.香农公式&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;带宽受限&lt;/strong&gt;且有&lt;strong&gt;高斯白噪声&lt;/strong&gt;干扰的信道的&lt;strong&gt;极限信息传输速&lt;/strong&gt;率：&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps6.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;strong&gt;(b/s)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;此式的信噪比S/N无单位！&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ C：信道的极限信息传输速率（单位为b/s）&lt;/p&gt;
&lt;p&gt;￮ W：信道的&lt;strong&gt;频率带宽&lt;/strong&gt;（单位为HZ）&lt;/p&gt;
&lt;p&gt;￮ S/N：信噪比，常用分贝（dB）表示&lt;/p&gt;
&lt;p&gt;￮ 信噪比（dB）&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps7.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 信道的频率带宽W或信道中更大信噪比S/N越大，信道的极限信息传输速率C就越高。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;六、信道复用技术&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 复用就是&lt;strong&gt;在一条传输媒体上同时传输多路用户的信号&lt;/strong&gt;。以便&lt;strong&gt;充分利用传输媒体的带宽。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.频分复用FDM&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 将传输媒体的&lt;strong&gt;总频带&lt;/strong&gt;划分为多个子频带。每个子频带作为一个信道。&lt;/p&gt;
&lt;p&gt;• 频分复用的所有用户&lt;strong&gt;同时&lt;/strong&gt;占用&lt;strong&gt;不同的频带&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;FDM适合传输模拟信号。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.时分复用TDM&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 将时间划分为一段段等长的时隙，每一个时分复用的用户在其相应时隙内独占传输媒体的资源进行通信。&lt;/p&gt;
&lt;p&gt;• TDM在发送端将不同用户的信号相互交织在不同的时间片内，沿同一个信道传输，在接收端再将各个时间片内的信号提取出来，还原为原始信号。&lt;/p&gt;
&lt;p&gt;• 各用户时隙周期性出现，周期为TDM帧的长度。&lt;/p&gt;
&lt;p&gt;• TDM帧实际上&lt;strong&gt;是一段固定长度的时间&lt;/strong&gt;，与数据链路层中出现的“帧”是完全不同的概念。&lt;/p&gt;
&lt;p&gt;• 时分复用的所有用户&lt;strong&gt;在不同的时间占用同样的频带。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;TDM比FDM抗干扰能力强&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;TDM适合传输数字信号。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.波分复用WDM&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 波分复用就是光的频分复用。&lt;/p&gt;
&lt;p&gt;• 在一根光纤上同时传输多个频率（波长）相近的光载波信号。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4.码分多址CDMA&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• CDMA的每个用户可以&lt;strong&gt;在相同的时间使用相同的频带进行通信。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• CDMA实现细节：&lt;/p&gt;
&lt;p&gt;￮ CDMA将每个比特时间划分为m个更短的时间片，称为&lt;strong&gt;码片&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ CDMA中的每个站点都被指派一个唯一的&lt;strong&gt;m比特码片序列&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 将码片序列中的比特0记为-1，而比特1记为+1，可写出码片序列相应的&lt;strong&gt;码片向量&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;▪ 某个站要发送&lt;strong&gt;比特1&lt;/strong&gt;，则发送它自己的&lt;strong&gt;m比特码片序列&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;▪ 某个站要发送&lt;strong&gt;比特0&lt;/strong&gt;，则发送它自己的&lt;strong&gt;m比特码片的反码&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 每个站分配的码片序列：&lt;strong&gt;各不相同，且必须互相正交&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 对于如何区分序列：&lt;/p&gt;
&lt;p&gt;▪ 不同向量的规格化内积为0&lt;/p&gt;
&lt;p&gt;▪ 码片向量和&lt;strong&gt;该码片向量自己&lt;/strong&gt;的规格化内积为&lt;strong&gt;1&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;▪ 码片向量和&lt;strong&gt;该码片向量的反码&lt;/strong&gt;的规格化内积为**-1**&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;要使用和加密时一样的码片进行解码才能获得对应数据。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;第三章 数据链路层&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;一、数据链路层概述&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;链路&lt;/strong&gt;是指从一个节点到相邻节点的一段物理线路（有线或无线），而&lt;strong&gt;中间没有任何其他的交换节点&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;将实现协议的硬件和软件加到链路上&lt;/strong&gt;，就构成了数据链路。&lt;/p&gt;
&lt;p&gt;￮ 计算机中的网络适配器（&lt;strong&gt;网卡&lt;/strong&gt;）和其相应的&lt;strong&gt;软件驱动程序&lt;/strong&gt;实现了这些协议。&lt;strong&gt;一般的网络适配器都包含了物理层和数据链路层这两层的功能&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;帧&lt;/strong&gt;是&lt;strong&gt;数据链路层&lt;/strong&gt;对等实体之间在水平方向进行逻辑通信的&lt;strong&gt;协议数据单元PDU。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;二、封装成帧和透明传输&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.封装成帧&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 封装成帧是指数据链路层给上层交付下来的数据协议单元PDU&lt;strong&gt;添加一个首部和一个尾部&lt;/strong&gt;，使之成为帧。&lt;/p&gt;
&lt;p&gt;￮ 帧的首部和尾部中含有一些&lt;strong&gt;重要的控制信息。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 帧首部和尾部的作用之一就是&lt;strong&gt;帧定界。&lt;strong&gt;但&lt;/strong&gt;并不是&lt;/strong&gt;每种数据链路层协议的帧&lt;strong&gt;都含有帧定界标志&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 为了提高效率，应当使帧的数据载荷的长度尽可能地大于首部和尾部的长度。&lt;/p&gt;
&lt;p&gt;• 每一种数据链路层协议都规定了帧的数据载荷的长度上限，即&lt;strong&gt;最大传送单元（MTU）&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.透明传输&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 透明传输是指&lt;strong&gt;数据链路层对上层交付下来的协议数据单元PDU没有任何限制&lt;/strong&gt;，就好像数据链路层不存在一样。&lt;/p&gt;
&lt;p&gt;• 对&lt;strong&gt;面向字节&lt;/strong&gt;的物理链路使用&lt;strong&gt;字节填充&lt;/strong&gt;的方法实现透明传输。&lt;/p&gt;
&lt;p&gt;￮ 字节填充为防止误判，在特殊字符之前&lt;strong&gt;填充一个转义字符&lt;/strong&gt;ESC来加以区分。&lt;/p&gt;
&lt;p&gt;• 对&lt;strong&gt;面向比特&lt;/strong&gt;的物理链路使用&lt;strong&gt;零比特填充&lt;/strong&gt;的方法实现透明传输。&lt;/p&gt;
&lt;p&gt;￮ 零比特传输使用“01111110”来标志帧的开始和结束，每遇到&lt;strong&gt;五个连续&lt;/strong&gt;的“1”时，就&lt;strong&gt;自动在其后插入一个“0”&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;三、差错检验&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.误码相关概念&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 比特差错：比特在传输过程中产生的差错，如0变1，1变0。&lt;/p&gt;
&lt;p&gt;• 传输错误的比特数量占所传输比特总数的比率称为误码率。&lt;/p&gt;
&lt;p&gt;• 帧尾部中用来存放检错码的字段称为&lt;strong&gt;帧检验序列FCS&lt;/strong&gt;。、&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.奇偶校验&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 奇校验是在待发送的数据后面&lt;strong&gt;添加1个校验位&lt;/strong&gt;，使得添加该校验位后的整个数据中&lt;strong&gt;比特1的个数&lt;/strong&gt;为&lt;strong&gt;奇数&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 偶校验是在待发送的数据后面&lt;strong&gt;添加1个校验位&lt;/strong&gt;，使得添加该校验位后的整个数据中&lt;strong&gt;比特1的个数&lt;/strong&gt;为&lt;strong&gt;偶数&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 在所传输的数据中，如果有&lt;strong&gt;奇数个位发生误码&lt;/strong&gt;，则所包含比特1的数量的奇偶性会发生改变，&lt;strong&gt;可以检测出误码&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.循环冗余校验CRC&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 收发双方约定好一个&lt;strong&gt;生成多项式G(X)。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 发送方：在待发送数据后添加&lt;strong&gt;生成多项式最高次个0&lt;/strong&gt;,&lt;strong&gt;除以&lt;/strong&gt;生成多项式各项系数构成的比特串，获得&lt;strong&gt;余数&lt;/strong&gt;，将余数添加到发送数据的后面一起发送。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;余数的位数&lt;/strong&gt;应当与&lt;strong&gt;生成多项式最高次数&lt;/strong&gt;相同，不够&lt;strong&gt;补0&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 接收方：将接收数据除以生成多项式各项系数构成的比特串，若&lt;strong&gt;结果为0&lt;/strong&gt;，则可判断接收&lt;strong&gt;无误码&lt;/strong&gt;；若&lt;strong&gt;结果为1&lt;/strong&gt;，则&lt;strong&gt;有误码&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 算法要求生成多项式&lt;strong&gt;必须包含最低次项&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 循环冗余校验和奇偶校验，都仅仅能检验出是否出错，而&lt;strong&gt;不能检测出错位置&lt;/strong&gt;，所以&lt;strong&gt;无法进行纠错&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4.海明码&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 海明码思想：将信息位&lt;strong&gt;分组&lt;/strong&gt;进行&lt;strong&gt;偶校验&lt;/strong&gt;，多个校验位可以标注出错位置。&lt;/p&gt;
&lt;p&gt;• 校验位为k位，则：&lt;strong&gt;2^k ≥ n + k + 1&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;四、可靠传输的概念&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 如何处理检测到有误码的帧，取决于数据链路层向上提供的服务类型。&lt;/p&gt;
&lt;p&gt;￮ 不可靠传输服务：仅仅&lt;strong&gt;丢弃&lt;/strong&gt;有误码的帧。&lt;/p&gt;
&lt;p&gt;￮ 可靠传输服务：通过某种机制实现发送方发送什么，接收方最终就能收到什么。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;有线链路的误码率较低&lt;/strong&gt;。为了减小开销，&lt;strong&gt;并不要求数据链路层向上层提供可靠传输服务&lt;/strong&gt;。即使出现了误码，可靠传输的问题由其上层处理。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;无线链路的误码率较高&lt;/strong&gt;，因此要求&lt;strong&gt;数据链路层必须向其上层提供可靠传输服务&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 传输差错不仅有误码一种情况：（&lt;strong&gt;出现在数据链路层的上层&lt;/strong&gt;）&lt;/p&gt;
&lt;p&gt;￮ 分组丢失：某个节点的输入队列快满了，主动丢弃收到的分组。&lt;/p&gt;
&lt;p&gt;￮ 分组失序：分组到达顺序与发送顺序不同。&lt;/p&gt;
&lt;p&gt;￮ 分组重复：服务器繁忙，分组在输入队列中等待较长时间，导致重传。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;可靠传输服务并不局限于数据链路层&lt;/strong&gt;，其他各层均可选择实现可靠传输。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;五、可靠传输的实现 —— 停止等待协议&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.停止等待协议原理&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 大致思想为，发送方发送一个&lt;strong&gt;数据分组&lt;/strong&gt;，接收方收到后，如果无误码则接收并发送&lt;strong&gt;确认分组ACK&lt;/strong&gt;，有误码则发送&lt;strong&gt;否认分组NAK&lt;/strong&gt;，发送方收到反馈信号后才会发送下一个数据分组。&lt;/p&gt;
&lt;p&gt;• 为避免过长等待，发送方在每发送完一个数据分组时就启动一个&lt;strong&gt;超时计时器&lt;/strong&gt;。若超过了超时计时器设置的&lt;strong&gt;超时重传时间RTO&lt;/strong&gt;，但发送方仍未收到接收方的反馈，就&lt;strong&gt;重传&lt;/strong&gt;之前已发送过的数据分组。&lt;/p&gt;
&lt;p&gt;• 为了让接收方能够判断所收到的数据分组是否是重复的，需要给&lt;strong&gt;数据分组编号&lt;/strong&gt;，&lt;strong&gt;只需1个比特编号即可。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 为了让发送方能够判断所收到的确认分组是否是重复的，需要给&lt;strong&gt;确认分组编号&lt;/strong&gt;，所用比特数量与数据分组所用比特数量一样。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;接收窗口和发送窗口的尺寸均为1。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 停止等待协议属于&lt;strong&gt;自动请求重传(ARQ)协议。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.信道利用率&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps8.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• &lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps9.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 在往返时间&lt;strong&gt;RTT相对较大&lt;/strong&gt;的情况下，收发双方不适合采用停止等待协议。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;六、可靠传输的实现 —— 回退N帧协议GBN&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps10.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 在使用流水线传输方式时，发送方&lt;strong&gt;不能无限制地连续发送数据分组&lt;/strong&gt;，否则会导致来不及处理这些分组，进而导致数据分组丢失。&lt;/p&gt;
&lt;p&gt;• 回退N帧协议采用流水线传输方式，并且利用&lt;strong&gt;发送窗口&lt;/strong&gt;来限制发送方连续发送数据分组的数量，这属于&lt;strong&gt;连续ARQ协议&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 窗口：&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;采用n个比特为分组编号。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 发送方需要维护一个&lt;strong&gt;发送窗口&lt;/strong&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps11.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;,在未收到接收方确认分组的情况下，发送方可将序号落入&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps12.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;内的所有数据分组连续发送出去。&lt;/p&gt;
&lt;p&gt;▪ &lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps13.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;▪ 当滑动窗口尺寸超过其上限时，会&lt;strong&gt;使接收方无法分辨新旧数据分组。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 接收方需要维护一个接收窗口&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps14.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;,只有正确到达接收方（无误码）且序号落入&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps15.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;内的数据分组才能被接收方接收。&lt;/p&gt;
&lt;p&gt;▪ &lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps16.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;的&lt;strong&gt;取值只能是1。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 接收方每&lt;strong&gt;正确收到&lt;/strong&gt;一个序号落入接收窗口的数据分组，就&lt;strong&gt;将接收窗口向前滑动一个位置&lt;/strong&gt;，这样就有一个新的序号落入接收窗口。与此同时，接收方还要给发送方发送针对该数据分组的&lt;strong&gt;确认分组&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;▪ 接收方采用&lt;strong&gt;累计确认&lt;/strong&gt;方式，ACKn表示n及之前的所有数据分组都已正确接收。&lt;/p&gt;
&lt;p&gt;▪ 累计确认会导致相同的分组被重复传输。&lt;/p&gt;
&lt;p&gt;￮ 发送方每收到一个&lt;strong&gt;按序确认的确认分组&lt;/strong&gt;，就&lt;strong&gt;将发送窗口向前滑动一个位置&lt;/strong&gt;，这样就有一个新的序号落入发送窗口，序号落入发送窗口内的数据分组可继续被发送。&lt;/p&gt;
&lt;p&gt;• 回退N帧：&lt;strong&gt;一旦出错，就需要退回去重传已发送过的N个数据分组。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 在回退N帧协议下，&lt;strong&gt;一个数据分组的差错就可能引起大量数据分组的重传&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 在信道质量较差的情况下，回退N帧协议的信道利用率&lt;strong&gt;并不比&lt;/strong&gt;停止等待协议的信道利用率高。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;信道利用率：发送窗口内所有数据帧的发送时延/（一个数据帧的发送时延+RTT+一个确认帧的发送时延）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;在一定范围内，帧越长，信道利用率越高，反之帧越短，信道利用率越短。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps17.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;七、可靠传输的实现 —— 选择重传协议SR&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps18.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 为了使发送方仅重传出现差错的数据分组，接收方&lt;strong&gt;不再采用累计确认&lt;/strong&gt;，而需要对每一个正确接收的数据分组进行。&lt;/p&gt;
&lt;p&gt;• 重传的帧要&lt;strong&gt;发生超时后&lt;/strong&gt;才会进行重传。&lt;/p&gt;
&lt;p&gt;• 若发送窗口尺寸&lt;strong&gt;超过其最大值(2^(n-1))&lt;/strong&gt;,会&lt;strong&gt;使接收方无法分辨新旧数据分组。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 选择重传协议SR和后退N帧协议GBN&lt;strong&gt;都属于连续ARQ协议。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 选择重传协议SR和后退N帧协议GBN的&lt;strong&gt;信道利用率都可以达到100%。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 信道利用率的大小往往和&lt;strong&gt;发送窗口大小相关&lt;/strong&gt;，一般情况下和&lt;strong&gt;后退N帧协议GBN的信道利用率大于选择重传协议SR&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;八、点对点协议PPP&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.PPP特点总结&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• PPP提供的是&lt;strong&gt;面向连接的不可靠服务&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• PPP只支持&lt;strong&gt;全双工点对点链路&lt;/strong&gt;，不支持多点线路。&lt;/p&gt;
&lt;p&gt;• PPP两端可以运行&lt;strong&gt;不同的网络层协议&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• PPP是面向字节的。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.PPP的帧格式&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps19.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 标志（FLAG）字段：PPP的帧定界符，取值为0x7E。&lt;/p&gt;
&lt;p&gt;• 地址（Address）字段：取值为0xFF，预留（目前没有作用）。&lt;/p&gt;
&lt;p&gt;• 控制（Control）字段：取值为0x03，预留（目前没有作用）。&lt;/p&gt;
&lt;p&gt;• 协议（Protocol）字段：其值用来指明帧的数据载荷应向上交付给哪个协议处理。&lt;/p&gt;
&lt;p&gt;• 帧检验序列（FCS）字段：其值是用来使用循环冗余校验CRC计算出的检错码。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.PPP帧的透明传输&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 面向字节的&lt;strong&gt;异步&lt;/strong&gt;链路使用&lt;strong&gt;字节填充&lt;/strong&gt;来实现透明传输&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps20.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;￮ 发送方处理：&lt;/p&gt;
&lt;p&gt;▪ 将数据载荷中出现的每一个&lt;strong&gt;0x7E&lt;/strong&gt;减去0x20(相当于异或0x20)，然后在其前面&lt;strong&gt;插入转义字符0x7D&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;▪ 若数据载荷中原来就含有&lt;strong&gt;0x7D&lt;/strong&gt;，则把每一个&lt;strong&gt;0x7D&lt;/strong&gt;减去0x20，然后在其前面&lt;strong&gt;插入转义字符0x7D&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;▪ 将数据载荷中出现的每一个ASCI码控制字符(即数值小于0x20的字符)加上0x20(相当于异或0x20，将其转换成非控制字符)，然后在其前面&lt;strong&gt;插入转义字符0x7D&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 接收方的处理&lt;/p&gt;
&lt;p&gt;▪ 进行&lt;strong&gt;与发送方相反的变换&lt;/strong&gt;，就可以正确地恢复出未经过字节填充的原始数据载荷。&lt;/p&gt;
&lt;p&gt;• 面向比特的同步链路使用&lt;strong&gt;零比特填&lt;/strong&gt;充来实现透明传输&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps21.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;￮ 发送方的处理:&lt;/p&gt;
&lt;p&gt;▪ 对帧的数据载荷进行扫描(一般由硬件完成)，每出现&lt;strong&gt;5个连续的比特1&lt;/strong&gt;，则在&lt;strong&gt;其后填充一个比特0&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 接收方的处理:&lt;/p&gt;
&lt;p&gt;▪ 对帧的数据载荷进行扫描，每出现&lt;strong&gt;5个连续的比特1&lt;/strong&gt;时，就把&lt;strong&gt;其后的一个比特0删除。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4.PPP帧的差错检验&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 接收方&lt;strong&gt;每收到一个PPP帧&lt;/strong&gt;，就进行CRC检验。若CRC检验正确，就收下这个帧；否则就丢弃这个帧。&lt;/p&gt;
&lt;p&gt;• 使用PPP的数据链路层，&lt;strong&gt;向上提供的是不可靠数据传输服务&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;九、网络适配器和MAC地址&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.网络适配器&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 要将计算机连接到以太网，需要使用相应的&lt;strong&gt;网络适配器&lt;/strong&gt;，网络适配器一般简称为“&lt;strong&gt;网卡&lt;/strong&gt;”。&lt;/p&gt;
&lt;p&gt;• 在计算机内部，&lt;strong&gt;网卡与CPU之间&lt;/strong&gt;的通信，一般是通过计算机主板上的I/O总线以&lt;strong&gt;并行传输&lt;/strong&gt;方式进行。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;网卡与外部以太网&lt;/strong&gt;（局域网）之间的通信，一般是通过传输媒体（同轴电缆、双绞线电缆、光纤）以&lt;strong&gt;串行方式&lt;/strong&gt;进行的。&lt;/p&gt;
&lt;p&gt;• 网卡除了要&lt;strong&gt;实现物理层和数据链路层功能&lt;/strong&gt;，还要进行&lt;strong&gt;并行传输和串行传输&lt;/strong&gt;的转换。&lt;/p&gt;
&lt;p&gt;• 网卡要工作还需要驱动程序，&lt;strong&gt;驱动程序&lt;/strong&gt;负责驱动网卡发送和接收帧。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.MAC地址&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 为了区分不同主机，每个主机都必须有一个&lt;strong&gt;唯一的标识&lt;/strong&gt;，即一个 &lt;strong&gt;地址——MAC地址&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 在每个主机发送的&lt;strong&gt;帧的首部&lt;/strong&gt;中，都携带有发送主机和接收主机的&lt;strong&gt;数据链路层地址&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;MAC地址&lt;/strong&gt;一般被固化在网卡的EEPROM中，因此MAC地址也被称为&lt;strong&gt;硬件地址、物理地址。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• MAC地址是对网络上&lt;strong&gt;各接口&lt;/strong&gt;的唯一标识，而不是对网络上各设备的唯一标识。&lt;/p&gt;
&lt;p&gt;• MAC地址格式&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps22.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 网卡从网络上每收到一个无误码的帧，就检查帧首部中的目的MAC地址，按以下情况处理：&lt;/p&gt;
&lt;p&gt;￮ 如果目的MAC地址是广播地址（FF-FF-FF-FF-FF-FF）,则接受该帧。&lt;/p&gt;
&lt;p&gt;￮ 如果目的MAC地址与网卡上固化的全球单播MAC地址相同，则接受该帧。&lt;/p&gt;
&lt;p&gt;￮ 如果目的MAC地址是网卡支持的多播地址，则接受该帧。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;十、ALOHA协议与CSMA协议与令牌环网&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.纯ALOHA协议&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 基本思想：当总线型网络中的任何站点需要发送数据时，可以&lt;strong&gt;不进行任何检测就发送数据&lt;/strong&gt;。若在一段时间内未收到确认，则该站点就认为传输过程中发生了冲突。发送站点需要&lt;strong&gt;等待一段随机的时间&lt;/strong&gt;后再发送数据，直至发送成功。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.时隙ALOHA协议&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 时隙ALOHA协议同步各站点的时间，将时间划分为一段段等长的&lt;strong&gt;时隙&lt;/strong&gt;，规定站点&lt;strong&gt;只能在每个时隙开始时才能发送帧&lt;/strong&gt;，发送一帧的时间必须&lt;strong&gt;小于或等于时隙长度&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 时隙ALOHA协议避免了用户发送数据的随意性，降低了产生冲突的可能性，提高了信道的利用率。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.CSMA协议&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;1-坚持CSMA&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;￮ 当站点要发送数据时，首先监听信道；若空闲，则发送；若忙，则继续监听直至信道空闲。&lt;/p&gt;
&lt;p&gt;￮ “坚持”是指当信道忙碌时，坚持监听直至空闲。&lt;/p&gt;
&lt;p&gt;￮ 1是指信道空闲时，立即发送帧的概率为1.&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;非坚持CSMA&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;￮ 当站点要发送数据时，首先监听信道；若空闲则立即发送；若不空闲，则放弃监听，等待一个随机事件后，再重新监听。&lt;/p&gt;
&lt;p&gt;￮ 降低了多个站点等待信道空闲后同时发送数据导致冲突的概率。&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;p-坚持CSMA&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;￮ p坚持CSMA只适用于是时分信道。&lt;/p&gt;
&lt;p&gt;￮ 当站点要发送数据时，首先监听信道；若信道忙碌，则持续监听（等到下一个时隙再监听），直至信道空闲；若信道空闲，则以概率p发送数据，概率1-p推迟到下一个时隙再继续监听。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4.令牌传递协议&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 核心特点：环形拓扑结构，各节点“&lt;strong&gt;轮询访问&lt;/strong&gt;”信道，&lt;strong&gt;不会发生信道冲突&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 令牌传递协议的工作原理：&lt;/p&gt;
&lt;p&gt;￮ 拿到令牌的才能进行传输。&lt;/p&gt;
&lt;p&gt;￮ 每次&lt;strong&gt;只能传一个帧&lt;/strong&gt;，传完就释放令牌。&lt;/p&gt;
&lt;p&gt;￮ 无论是令牌帧还是数据帧，都只能沿单向传播。&lt;/p&gt;
&lt;p&gt;￮ 没有数据要发的结点，收到令牌就&lt;strong&gt;直接传递&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 令牌传递协议适合&lt;strong&gt;负载很&lt;/strong&gt;高的广播信道。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;十一、CSMA/CD协议的基本原理&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 将多个站点连接在一条总线上来构建&lt;strong&gt;共享总线以太网&lt;/strong&gt;。具有&lt;strong&gt;天然的广播特性&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• CSMA/CD协议&lt;strong&gt;不适用于无线网络&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 当某个站点在总线上发送帧时，总线资源会被该站点独占。此时，如果总线上的其他站点也要在总线上发送帧，就会发生&lt;strong&gt;信号碰撞&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 为了解决各站点争用总线问题，共享总线以太网使用了一种专门协议&lt;strong&gt;CSMA/CD&lt;/strong&gt;，他是&lt;strong&gt;载波监听、多点接入、 碰撞检测&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 载波监听：每个站点在发送帧之前，先要检测一下总线上是否有其他站点在发送帧（“&lt;strong&gt;先听后说&lt;/strong&gt;”）。&lt;/p&gt;
&lt;p&gt;￮ 检测碰撞：每个正在发送帧的站点&lt;strong&gt;边发送边检测碰撞&lt;/strong&gt;（“&lt;strong&gt;边听边说&lt;/strong&gt;”）&lt;/p&gt;
&lt;p&gt;• 载波监听检测到总线空闲，但&lt;strong&gt;总线并不一定空闲&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 使用CSMA/CD协议的共享总线以太网上的各站点，只是尽量避免碰撞并在出现碰撞时退避后重发的处理，但&lt;strong&gt;不能完全避免碰撞&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 使用CSMA/CD协议时，由于正在发送帧的站点必须“边发送帧边检测碰撞”，因此&lt;strong&gt;只能进行半双工通信。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.争用期&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps23.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;δ代表“还省δ时间抵达D”&lt;/p&gt;
&lt;p&gt;• 站点从发送帧开始，最多经过时长&lt;strong&gt;2τ&lt;/strong&gt;就可以检测出所发送的帧是否遭遇了碰撞。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;争用期 = 2 * 最大单向传播时延&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 站点从发送帧开始，经过争用期&lt;strong&gt;2τ这段时间还没有检测到碰撞，就可以肯定这次发送不会发生碰撞。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 10Mb/s共享总线以太网规定：&lt;strong&gt;争用期2τ的值512比特的发送时间，即51.2μs&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;最短帧长= 2 * 最大单向传播时延 * 信道带宽&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 若收到的帧&lt;strong&gt;小于最短帧长&lt;/strong&gt;，视为&lt;strong&gt;无效帧&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 注意最短帧长实际上是&lt;strong&gt;时延带宽积的2倍&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.退避算法&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 在使用CSMA/CD协议的共享总线以太网中，正在发送帧的站点一边发送帧一边检测碰撞，当检测到碰撞时立即停止发送，&lt;strong&gt;退避一段随机时间&lt;/strong&gt;后再重新发送。&lt;/p&gt;
&lt;p&gt;• 共享总线以太网中的各站点采用&lt;strong&gt;截断二进制指数退避算法&lt;/strong&gt;来选择退避的随机时间。&lt;/p&gt;
&lt;p&gt;￮ 退避时间 = 基本退避时间2τ * 随机数r&lt;/p&gt;
&lt;p&gt;￮ 其中r是从离散的整数集合**{0，1，&amp;hellip;，（2^k-1）}**中随机选出一个数，&lt;strong&gt;k=min{重传次数，10}&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 该算法&lt;strong&gt;可使重传需要推迟的平均时间随重传次数而增大&lt;/strong&gt;（动态退避），因而减小发生碰撞的概率&lt;/p&gt;
&lt;p&gt;￮ 当重传&lt;strong&gt;16&lt;/strong&gt;次仍不能成功时，&lt;strong&gt;放弃重传&lt;/strong&gt;并向高层报告。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.信道利用率&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps24.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 考虑理想情况：&lt;/p&gt;
&lt;p&gt;￮ 总线一旦空闲就有某个站点立即发送帧。&lt;/p&gt;
&lt;p&gt;￮ 各站点发送帧都不会产生碰撞。&lt;/p&gt;
&lt;p&gt;￮ 极限信道利用率：&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps25.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;￮ 要提高信道利用率，则&lt;strong&gt;端到端距离不应太长&lt;/strong&gt;，&lt;strong&gt;帧的长度尽量大&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;十二、在数据链路层扩展以太网（网桥）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 使用集线器会导致&lt;strong&gt;扩大碰撞域&lt;/strong&gt;，为了解决这个问题，&lt;strong&gt;可以使用网桥&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 网桥&lt;strong&gt;工作在数据链路层，&lt;strong&gt;因此&lt;/strong&gt;网桥具备属于数据链路层范畴的相关能力&lt;/strong&gt;。、&lt;/p&gt;
&lt;p&gt;￮ 网桥可以&lt;strong&gt;识别帧的结构&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 网桥可以根据帧首部中的&lt;strong&gt;目的MAC地址&lt;/strong&gt;和网桥自身的&lt;strong&gt;帧转发表&lt;/strong&gt;来&lt;strong&gt;转发或丢弃&lt;/strong&gt;所收到的帧。&lt;/p&gt;
&lt;p&gt;￮ 网桥在收到&lt;strong&gt;广播帧&lt;/strong&gt;时，不用查表，直接接受该帧。&lt;/p&gt;
&lt;p&gt;￮ 网桥的接口在向其网段转发帧时，会执行相应的媒体接入控制协议，对于共享式以太网就是CSMA/CD协议。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.透明网桥的自学习和转发帧的流程。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 网桥中的&lt;strong&gt;转发表&lt;/strong&gt;对于&lt;strong&gt;帧的转发&lt;/strong&gt;起着决定性的作用。&lt;/p&gt;
&lt;p&gt;• 透明网桥中通过&lt;strong&gt;自学习算法&lt;/strong&gt;建立转发表。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;以太网中的各网桥对于各站点而言是看不见的&lt;/strong&gt;，以太网的各站点并不知道自己所发送的帧将会经过哪些网桥的转发。&lt;/p&gt;
&lt;p&gt;• 网桥的&lt;strong&gt;自学习和转发帧的流程&lt;/strong&gt;：&lt;/p&gt;
&lt;p&gt;a. 网桥收到帧后进行登记（即自学习），登记内容为帧的&lt;strong&gt;源MAC地址&lt;/strong&gt;和进入网桥的&lt;strong&gt;接口号&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;b. 网桥根据帧的&lt;strong&gt;目的MAC地址&lt;/strong&gt;和网桥的&lt;strong&gt;转发表&lt;/strong&gt;对帧进行&lt;strong&gt;转发&lt;/strong&gt;，包含以下三种情况：&lt;/p&gt;
&lt;p&gt;▪ &lt;strong&gt;明确转发&lt;/strong&gt;：网桥知道应当从哪个接口转发帧。&lt;/p&gt;
&lt;p&gt;▪ &lt;strong&gt;盲目转发&lt;/strong&gt;：网桥不知道应当从哪个接口转发帧，只能将其通过除进入网桥的接口外的其他所有接口转发。&lt;/p&gt;
&lt;p&gt;▪ &lt;strong&gt;丢弃&lt;/strong&gt;：网桥知道不应该转发该帧，将其丢弃。&lt;/p&gt;
&lt;p&gt;注意：1. 如果网桥收到有&lt;strong&gt;误码的帧&lt;/strong&gt;则直接&lt;strong&gt;丢弃&lt;/strong&gt;。2. 如果网桥收到一个无误码的广播帧，则不用进行查表，而是直接从除接收该广播帧的接口的&lt;strong&gt;其他接口转发&lt;/strong&gt;该广播帧。3. 转发表中的每条记录都有其&lt;strong&gt;有效时间，到期自动删除&lt;/strong&gt;！&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.透明网桥的生成树协议STP&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 为了提高以太网的&lt;strong&gt;可靠性&lt;/strong&gt;，有时会在两个以太网之间使用多个网桥来提供&lt;strong&gt;冗余链路&lt;/strong&gt;，而这会导致&lt;strong&gt;环路&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 为了解决环路引起的死循环，透明网桥使用&lt;strong&gt;生成树协议&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 不管网桥之间连接成了怎样复杂的带环拓扑，网桥之间通过&lt;strong&gt;交互网桥协议单元&lt;/strong&gt;，&lt;strong&gt;找出原网络拓扑的一个连通子集（生成树）&lt;/strong&gt;，在这个子集里整个连通的网络中&lt;strong&gt;不存在环路&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 当首次连接网桥或网络拓扑发生变化时（人为改变或出现故障），网桥都会重新构成生成树，以确保网络的连通。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;十三、交换式以太网&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 网桥的&lt;strong&gt;接口数量很少&lt;/strong&gt;，通常只有2-4个，一般指用来&lt;strong&gt;连接不同的网段&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;交换机是具有多个接口的网桥 。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;交换机的多个接口可以并行传输。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;交换机无法隔离广播域。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 仅使用&lt;strong&gt;交换机&lt;/strong&gt;而不使用&lt;strong&gt;集线器&lt;/strong&gt;的以太网就是&lt;strong&gt;交换式以太网&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 交换机的每个接口可以连接&lt;strong&gt;计算机&lt;/strong&gt;，也可以连接&lt;strong&gt;集线器&lt;/strong&gt;或另一个&lt;strong&gt;交换机&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 当交换机的&lt;strong&gt;接口与计算机或交换机连接&lt;/strong&gt;时，可以工作在&lt;strong&gt;全双工方式&lt;/strong&gt;，并能&lt;strong&gt;在自身内部同时连通多个接口&lt;/strong&gt;，使每一对相互通信的计算机都能像独占传输媒体那样，无碰撞地传输数据，这样就&lt;strong&gt;不需要使用CSMA/CD协议&lt;/strong&gt;了。&lt;/p&gt;
&lt;p&gt;￮ 当交换机的&lt;strong&gt;接口连接的是集线器&lt;/strong&gt;时，该接口就&lt;strong&gt;只能使用CSMA/CD协议&lt;/strong&gt;并只能工作在&lt;strong&gt;半双工方式&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps26.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 一般的交换机都采用“&lt;strong&gt;存储转发&lt;/strong&gt;”方式，为了减小交换机的转发时延，某些交换机采用了&lt;strong&gt;直通&lt;/strong&gt;交换方式。&lt;/p&gt;
&lt;p&gt;• 采用&lt;strong&gt;直通交换方式&lt;/strong&gt;的交换机，在&lt;strong&gt;接收到帧的同时就立即按帧的目的MAC地址决定该帧的转发接口&lt;/strong&gt;，而&lt;strong&gt;不必把整个帧先缓存&lt;/strong&gt;后再进行处理。&lt;/p&gt;
&lt;p&gt;￮ 直通交换的&lt;strong&gt;时延非常小&lt;/strong&gt;。为&lt;strong&gt;接收6B目的MAC地址的时间。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 直通交换&lt;strong&gt;不检查差错就直接将帧转发出去&lt;/strong&gt;，有可能会将一些无效帧转发给其他主机。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;十四、共享式以太网和交换式以太网对比&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 共享式以太网和交换式以太网的对比，即&lt;strong&gt;集线器与交换机&lt;/strong&gt;的对比。&lt;/p&gt;
&lt;p&gt;• 在发送&lt;strong&gt;单播帧&lt;/strong&gt;时：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps27.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 在发送&lt;strong&gt;广播帧&lt;/strong&gt;时:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps28.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;￮ 集线器工作在物理层，不能识别帧，只是盲目的转发。&lt;/p&gt;
&lt;p&gt;￮ 交换机工作在数据链路层，可以识别帧的结构，从帧首部提取MAC地址后，根据查表结果进行对应的转发。&lt;/p&gt;
&lt;p&gt;• 在&lt;strong&gt;多主机通信&lt;/strong&gt;时：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps29.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 集线器：扩大了广播域、&lt;strong&gt;扩大了碰撞域&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 交换机：扩大了广播域、&lt;strong&gt;隔离了碰撞域&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;十五、以太网的MAC帧格式&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps30.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 类型用来指明&lt;strong&gt;数据载荷&lt;/strong&gt;中的内容是由上一层的哪个&lt;strong&gt;协议&lt;/strong&gt;封装的。&lt;/p&gt;
&lt;p&gt;• 接收方可能会收到的&lt;strong&gt;无效MAC帧&lt;/strong&gt;包括以下几种：&lt;/p&gt;
&lt;p&gt;￮ MAC帧的长度不是整数字节&lt;/p&gt;
&lt;p&gt;￮ 通过MAC帧的FCS字段的值检测出帧有误码&lt;/p&gt;
&lt;p&gt;￮ MAC帧的长度不在&lt;strong&gt;64-1518&lt;/strong&gt;字节之间&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;十六、虚拟局域网VLAN与802.1Q帧&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.VLAN的概念&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 虚拟局域网VLAN是一种将局域网内的站点划分成&lt;strong&gt;与物理位置无关的逻辑组&lt;/strong&gt;的技术，一个逻辑组就是一个VLAN，VLAN中的各站点具有某些共同的用用需求。&lt;/p&gt;
&lt;p&gt;• 虚拟局域网&lt;strong&gt;建立在交换式以太网的基础上****。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 属于同一VLAN的站点之间可以直接进行通信，而不同VLAN中的站点之间不能直接通信。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.VLAN的实现&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;VLAN的划分：基于交换机接口、基于网卡地址划分、基于网络层地址划分。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;VLAN优点：有效共享网络资源、简化网络管理、提高网络安全性。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• VLAN最常见的实现是&lt;strong&gt;基于以太网交换机的接口&lt;/strong&gt;。这需要以太网交换机能够实现以下两个功能：&lt;/p&gt;
&lt;p&gt;a. 能够处理带有VLAN标记的帧，即&lt;strong&gt;IEEE 802.1Q&lt;/strong&gt;帧&lt;/p&gt;
&lt;p&gt;b. 交换机的各接口可以支持&lt;strong&gt;不同的接口类型&lt;/strong&gt;，不同接口类型的接口对帧的处理方式有所不同。&lt;/p&gt;
&lt;p&gt;• 802.1Q帧一般不由用户的主机处理，而是由&lt;strong&gt;以太网交换机&lt;/strong&gt;进行处理：&lt;/p&gt;
&lt;p&gt;￮ 当交换机&lt;strong&gt;收到普通的以太网MAC帧&lt;/strong&gt;时，会给其&lt;strong&gt;插入&lt;strong&gt;&lt;strong&gt;4字节&lt;/strong&gt;&lt;/strong&gt;的VLAN标签使之成为802.1Q帧&lt;/strong&gt;，该处理简称为“&lt;strong&gt;打标签&lt;/strong&gt;”。&lt;/p&gt;
&lt;p&gt;￮ 当交换机&lt;strong&gt;转发802.1Q帧&lt;/strong&gt;时，可能会&lt;strong&gt;删除其4字节的VLAN标签使之成为普通的以太网MAC帧&lt;/strong&gt;，该处理简称为“&lt;strong&gt;去标签&lt;/strong&gt;”。交换机转发802.1Q帧时，也有可能不进行“去标签”处理，是否进行该处理去接与交换机的接口类型。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;同一个VLAN下的主机进行通信的时候，不需要用到802.1Q帧。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 根据接口在&lt;strong&gt;接收帧和转发帧时对帧的处理方式&lt;/strong&gt;的不同，以及&lt;strong&gt;接口连接对象&lt;/strong&gt;的不同，以太网交换机的接口类型一般分为&lt;strong&gt;Access&lt;/strong&gt;和&lt;strong&gt;Trunk&lt;/strong&gt;两种。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps31.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps32.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;Access接口&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ Access接口一般用于连接用户计算机，由于其只能属于一个VLAN，因此Access接口的PVID与其所处的VLAN的ID相同。&lt;/p&gt;
&lt;p&gt;￮ 接收处理：一般只接受“未打标签”的普通以太网MAC帧，根据接收帧的接口的PVID给帧“&lt;strong&gt;打标签&lt;/strong&gt;”。&lt;/p&gt;
&lt;p&gt;￮ 转发处理：若帧中的VID值与接口的PVID值相等，则给帧“&lt;strong&gt;去标签&lt;/strong&gt;”后再进行转发，否则不转发帧。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;Trunk接口&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ Trunk接口一般用于&lt;strong&gt;交换机之间的互联&lt;/strong&gt;。Trunk接口可以属于多个VLAN，即Trunk接口&lt;strong&gt;可以通过属于不同VLAN的帧&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 接收处理：既&lt;strong&gt;可以接收&lt;/strong&gt;“未打标签”&lt;strong&gt;的普通以太网MAC帧,&lt;strong&gt;也可以接收“已打标签”的&lt;/strong&gt;802.1Q帧&lt;/strong&gt;。若接收到普通以太网MAC帧时，根据接收帧的接口的PVID给帧“&lt;strong&gt;打标签&lt;/strong&gt;”，这与Access接口的处理相同。&lt;/p&gt;
&lt;p&gt;￮ 转发处理：对于帧的VID值等于接口的PVID值的802.1Q帧，将其**“去标签”转发**;对于帧的VID值不等于接口的PVID值的802.1Q帧，将其&lt;strong&gt;直接转发&lt;/strong&gt;。因此，从Trunk接口转发出的帧，可能是普通以太网MAC帧也可能是802.1Q帧。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;十七、802.11无线局域网的组成&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.有固定基础设施的802.11无线局域网&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 最小构建称为基本服务集BSS，包含一个接入点AP和若干个移动站。&lt;/p&gt;
&lt;p&gt;• 本BSS内各站点之间的通信与本BSS外的站点之间的通信，都必须通过本BSS内的AP进行转发。&lt;/p&gt;
&lt;p&gt;• 802.11标准并没有定义是实现漫游的具体方法，仅定义了以下一些基本服务。&lt;/p&gt;
&lt;p&gt;a. 关联服务&lt;/p&gt;
&lt;p&gt;▪ 被动扫描&lt;/p&gt;
&lt;p&gt;▪ 主动扫描&lt;/p&gt;
&lt;p&gt;b. 重建关联服务和分离服务&lt;/p&gt;
&lt;p&gt;▪ 如果一个移动站要把与某个接入点AP的关联转移到另一个AP，就可以使用重建关联服务；若要终止关联服务，就应使用分离服务。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;十八、802.11无线局域网的数据链路层——使用CSMA/CA协议&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• CSMA/CA协议，即&lt;strong&gt;载波接听多点接入/&lt;strong&gt;&lt;strong&gt;碰撞避免&lt;/strong&gt;&lt;/strong&gt;。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• CSMA/CA协议仍然采用CSMA/CD协议中的CSMA，以“先听后说”的方式来减少碰撞的发生，但是&lt;strong&gt;将“碰撞检测CD”改为了“碰撞避免CA”。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 无线局域网不采用“碰撞检测CD”的原因：&lt;/p&gt;
&lt;p&gt;￮ 无线信道的传输环境相当复杂，&lt;strong&gt;如果要实现碰撞检测，对硬件要求非常高。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 由于无线电波传输的特殊性（&lt;strong&gt;存在隐蔽站问题&lt;/strong&gt;），&lt;strong&gt;还会出现无法检测到碰撞的情况&lt;/strong&gt;，因此&lt;strong&gt;实现碰撞检测并没有意义&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.CSMA/CA工作原理&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;发送方：先听后发，忙则退避&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 若信道空闲，&lt;strong&gt;间隔DIFS&lt;/strong&gt;后，再发送帧（&lt;strong&gt;一口气发完，发送过程不检测冲突&lt;/strong&gt;）嗷嗷&lt;/p&gt;
&lt;p&gt;￮ 若信道不空闲，则进行“&lt;strong&gt;随机退避&lt;/strong&gt;”&lt;/p&gt;
&lt;p&gt;• 接收方：停止等待协议&lt;/p&gt;
&lt;p&gt;￮ 每收到一个正确数据帧都&lt;strong&gt;返回ACK&lt;/strong&gt;；若&lt;strong&gt;发送方&lt;/strong&gt;超时未收到ACK，则进行“&lt;strong&gt;随机退避&lt;/strong&gt;”&lt;/p&gt;
&lt;p&gt;• “随机退避”原理：&lt;/p&gt;
&lt;p&gt;a. 用二进制指数退避算法确定一段随机退避时间&lt;/p&gt;
&lt;p&gt;b. &lt;strong&gt;发送方&lt;/strong&gt;会保持监听信道，&lt;strong&gt;只有信道空闲时才“扣除倒计时”&lt;/strong&gt;，倒计时结束后立即发送帧。&lt;/p&gt;
&lt;p&gt;• 帧间间隔IFS&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;DIFS&lt;/strong&gt;**，最长IFS**：每次“帧事务”开始之前需要等待的时间。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;SIFS&lt;/strong&gt;**，最短IFS**：用来分隔属于一次对话的各帧。&lt;/p&gt;
&lt;p&gt;￮ 可以理解为把SIFS当逗号用。&lt;/p&gt;
&lt;p&gt;• 信道预约机制（即**虚拟载波监听，**&lt;strong&gt;非必须&lt;/strong&gt;）：&lt;/p&gt;
&lt;p&gt;a. &lt;strong&gt;发送方&lt;/strong&gt;广播&lt;strong&gt;请求发送帧RTS&lt;/strong&gt;（先听后发，忙则退避）&lt;/p&gt;
&lt;p&gt;b. AP广播&lt;strong&gt;允许发送帧CTS&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;c. 其他无关节点收到CTS后自觉“禁言”，&lt;strong&gt;发送方&lt;/strong&gt;收到CTS后，就可以发送数据帧&lt;/p&gt;
&lt;p&gt;d. AP收到数据帧后，进行CRC校验，若无差错就返回ACK帧。&lt;/p&gt;
&lt;p&gt;￮ RTS帧时间：&lt;strong&gt;SIFS+CTS+SIFS+数据帧+SIFS+ACK&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ CTS帧时间：&lt;strong&gt;SIFS+数据帧+SIFS+ACK&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;CSMA/CD与CSMA/CA的不同&lt;/strong&gt;:CSMA/CA在发送数据帧之前先广播告知其他站点，让其他站点在这段时间内不要发送数据帧，以免发生冲突。CSMA/CD在发送数据帧之前监听，边发送边监听，一旦发生冲突，就立即停止发送。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps33.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps34.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;十九、802.11无线局域网的MAC帧&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 数据帧&lt;/p&gt;
&lt;p&gt;￮ 用于站点间传输数据&lt;/p&gt;
&lt;p&gt;• 控制帧&lt;/p&gt;
&lt;p&gt;￮ 通常与数据帧搭配使用&lt;/p&gt;
&lt;p&gt;￮ 负责区域清空、虚拟载波监听的维护以及信道的接入，并于收到数据帧时予以确认。&lt;/p&gt;
&lt;p&gt;￮ ACK帧、RTS帧以及CTS帧等都属于控制帧&lt;/p&gt;
&lt;p&gt;• 管理帧&lt;/p&gt;
&lt;p&gt;￮ 用于加入/退出无线网络，以及处理AP之间连接的转移事宜。&lt;/p&gt;
&lt;p&gt;￮ 信标帧、关联请求帧以及身份认证帧等都属于管理帧。&lt;/p&gt;
&lt;p&gt;• 数据帧格式：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps35.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;01表示来自AP，10表示去往AP。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;去往&lt;strong&gt;&lt;strong&gt;AP&lt;/strong&gt;&lt;/strong&gt;中起&lt;strong&gt;&lt;strong&gt;止，&lt;strong&gt;&lt;strong&gt;来自&lt;/strong&gt;&lt;/strong&gt;AP&lt;/strong&gt;&lt;/strong&gt;止中****起。（第一个为接收方，第二个为发送方，第三个为剩下的那个）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;二十、以太网总结&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 以太网的&lt;strong&gt;逻辑拓扑是总线型结构，物理拓扑是星型拓扑&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 以太网主要确定最低两层，即&lt;strong&gt;物理层和数据链路层&lt;/strong&gt;的功能。&lt;/p&gt;
&lt;p&gt;• 以太网采用&lt;strong&gt;分组交换&lt;/strong&gt;的方法。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;光纤&lt;/strong&gt;以太网必须以&lt;strong&gt;全双工&lt;/strong&gt;速度运行。&lt;/p&gt;
&lt;p&gt;• 以太网采取两项措施简化通信：&lt;/p&gt;
&lt;p&gt;￮ 采用无连接的工作方式，既不对发送的数据帧编号，也不要求接收方发送确认，即以太网&lt;strong&gt;尽最大努力交付数据&lt;/strong&gt;，提供的是不可靠服务，对差错的纠正由高层完成。&lt;/p&gt;
&lt;p&gt;￮ 发送的数据&lt;strong&gt;都使用曼彻斯特编码&lt;/strong&gt;的信号。&lt;/p&gt;
&lt;p&gt;• 计算机通过网卡与外界进行通信，工作在&lt;strong&gt;数据链路层&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;二十一、广域网&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;/th&gt;
          &lt;th&gt;广域网&lt;/th&gt;
          &lt;th&gt;局域网&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;覆盖范围&lt;/td&gt;
          &lt;td&gt;很广，通常跨区域&lt;/td&gt;
          &lt;td&gt;较小，通常在一个区域内&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;连接方式&lt;/td&gt;
          &lt;td&gt;通常采用&lt;strong&gt;点对点连接（PPP）&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;普遍使用广播信道&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;OSI参考模型层次&lt;/td&gt;
          &lt;td&gt;三层：物理层、数据链路层、网络层&lt;/td&gt;
          &lt;td&gt;两层：物理层、数据链路层&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;着重点&lt;/td&gt;
          &lt;td&gt;强调&lt;strong&gt;资源共享&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;强调&lt;strong&gt;数据传输&lt;/strong&gt;&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;第四章 网络层&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;一、网络层概述&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.分组转发和路由选择&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 网络层的主要任务就是&lt;strong&gt;将分组从源主机经过多个网络和多段链路传输到目的主机&lt;/strong&gt;，可以将该任务划分为&lt;strong&gt;分组转发&lt;/strong&gt;和&lt;strong&gt;路由选择&lt;/strong&gt;两种重要功能。&lt;/p&gt;
&lt;p&gt;• 转发过程中依靠&lt;strong&gt;转发表&lt;/strong&gt;进行转发。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.网络层向其上层提供服务（1）面向连接的虚电路服务&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 核心思想是“&lt;strong&gt;可靠通信应由网络自身来保证&lt;/strong&gt;”。&lt;/p&gt;
&lt;p&gt;• 必须首先&lt;strong&gt;建立网络层链接——虚电路&lt;/strong&gt;，以保证通信双方所需的一切网络资源。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;仅在建立连接阶段时使用目的地址&lt;/strong&gt;，之后每个分组使用虚电路号。&lt;/p&gt;
&lt;p&gt;• 通信双方&lt;strong&gt;沿着已建立的虚电路发送分组。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 通信结束后，需要&lt;strong&gt;释放&lt;/strong&gt;之前所建立的虚电路。&lt;/p&gt;
&lt;p&gt;• 虚电路按照&lt;strong&gt;存储转发方式&lt;/strong&gt;工作。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps36.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 虚电路表示这是一条&lt;strong&gt;逻辑上的连接&lt;/strong&gt;，分组沿着这条逻辑连接按照&lt;strong&gt;存储转发&lt;/strong&gt;方式传送，而&lt;strong&gt;不是真正建立了一条物理连接，因此****不会发生成图。&lt;/strong&gt;• 分组的首部仅在建立连接阶段使用完整的目的主机地址，之后每个分组的首部只需要携带一条虚电路编号即可。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.网络层向其上层提供服务（2）无连接的数据报服务&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 核心思想是“&lt;strong&gt;可靠通信应由用户主机来保证&lt;/strong&gt;”&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;不需要建立网络层连接&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;每个分组可走不同路径&lt;/strong&gt;。因此，每个分组的首部都必须&lt;strong&gt;携带目的主机的完整地址。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 通信结束后，&lt;strong&gt;没有需要释放&lt;/strong&gt;的连接。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps37.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 这种通信方式所传送的分组可能会&lt;strong&gt;误码、丢失、重复和失序。&lt;/strong&gt;• 将相对简单的尽最大努力（即&lt;strong&gt;不可靠&lt;/strong&gt;）的分组交付功能置于因特网核心。• 将复杂的网络处理功能置于因特网的边缘。（即用户主机和其内部的运输层）。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;二、网际协议IP和异构网络互联&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 网际协议（IP）是TCP/IP体系结构&lt;strong&gt;网际层中的核心协议&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 与IP协议配套使用的协议：&lt;/p&gt;
&lt;p&gt;￮ 网际控制报文协议&lt;strong&gt;ICMP&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 网际组管理协议&lt;strong&gt;IGMP&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 地址解析协议&lt;strong&gt;ARP&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 因特网由数以百万计的网络通过路由器互连起来的。&lt;/p&gt;
&lt;p&gt;￮ 这些网络的拓扑、性能以及所使用的网络协议都不尽相同，这是由用户需求的多样性造成的，没有一种单一的网络能够适应所有用户的需求。&lt;/p&gt;
&lt;p&gt;￮ 当异构网络的网络层都是用相同的网际层IP，从网络层角度看，好像是一个统一的网路(ip网络)。&lt;/p&gt;
&lt;p&gt;￮ 当IP网上的主机进行通信时，就好像在一个单个网络上通信一样，它们看不见互连的各网络的具体异构细节。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;三、IPv4地址及其编址方法&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.IPv4地址概述&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• IPv4地址是给因特网上的&lt;strong&gt;每一个主机（或路由器）的每一个接口&lt;/strong&gt;分配的一个在全世界范围内的&lt;strong&gt;唯一的32比特的标识符&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• IPv4地址的三种编址方法：&lt;strong&gt;分类编址、划分子网、无分类编址。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• IPv4地址由32个比特构成，采用点分十进制方法表示。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.分类编址&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 将32位IPv4地址分为&lt;strong&gt;网络号和主机号。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps38.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps39.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;A类&lt;/strong&gt;、&lt;strong&gt;B类&lt;/strong&gt;和&lt;strong&gt;C类&lt;/strong&gt;地址都是&lt;strong&gt;单播地址&lt;/strong&gt;，只有单播地址可以&lt;strong&gt;分配给网络中的主机（或路由器）的各接口。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;主机号为“全0”的地址是网络地址&lt;/strong&gt;，&lt;strong&gt;不能分配&lt;/strong&gt;给主机（或路由器）的各接口。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;主机号为“全1”的地址是广播地址&lt;/strong&gt;，&lt;strong&gt;不能分配&lt;/strong&gt;给主机（或路由器）的各接口。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;A类地址&lt;/strong&gt;：&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;最小网络号为0，表示本网络&lt;/strong&gt;，不能指派；&lt;/p&gt;
&lt;p&gt;￮ 最小可指派的网络号为&lt;strong&gt;1&lt;/strong&gt;，网络地址为&lt;strong&gt;1.0.0.0&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;最大网络号为127，作为本地环回测试地址&lt;/strong&gt;，不能指派&lt;/p&gt;
&lt;p&gt;▪ 最小的本地环回测试地址为&lt;strong&gt;127.0.0.1&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;▪ 最大的本地环回测试地址为&lt;strong&gt;127.255.255.254&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 最大可指派的网络号为&lt;strong&gt;126&lt;/strong&gt;，网络地址为126.0.0.0&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;可指派的A类网络&lt;/strong&gt;数量为&lt;strong&gt;2^7-2=126&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;▪ 每个A类网络中可分配的地址数量为&lt;strong&gt;2^24-2****（减去网络地址和广播地址）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;B类地址：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 最小可指派的网络号为&lt;strong&gt;128.0，网络地址为128.0.0.0&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 最大可指派的网络号为&lt;strong&gt;191.255，网络地址为191.255.0.0&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;可指派的B类网络&lt;/strong&gt;数量为&lt;strong&gt;2^14=16384&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 每个B类网络中可分配的地址数量为&lt;strong&gt;2^16-2=65534（减去网络地址和广播地址）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;C类地址：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 最小可指派的网络号为&lt;strong&gt;192.0.0，网络地址为192.0.0.0&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 最大可指派的网络号为&lt;strong&gt;223.255.255，网络地址为223.255.255.0&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;可指派的C类网络&lt;/strong&gt;数量为&lt;strong&gt;2^21&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 每个B类网络中可分配的地址数量为&lt;strong&gt;2^8-2=254（减去网络地址和广播地址）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;私有地址&lt;/strong&gt;：&lt;/p&gt;
&lt;p&gt;￮ A类：&lt;strong&gt;10&lt;/strong&gt;.0.0.0 —— &lt;strong&gt;10&lt;/strong&gt;.255.255.255&lt;/p&gt;
&lt;p&gt;￮ B类：&lt;strong&gt;172.16&lt;/strong&gt;.0.0 —— &lt;strong&gt;172.31&lt;/strong&gt;.255.255 （/12 ）&lt;/p&gt;
&lt;p&gt;￮ C类：&lt;strong&gt;192.168.0&lt;/strong&gt;.0 —— &lt;strong&gt;192.168.255&lt;/strong&gt;.255&lt;/p&gt;
&lt;p&gt;• 前八位中，&lt;strong&gt;1-126表示A类网络（127被空出），128-191为B类网络，192-223为C类网络&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 一般不使用的特殊IPv4地址&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps40.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;路由器在接收到255.255.255.255的的分组时，不进行转发！&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.划分子网&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 划分子网的思路：从&lt;strong&gt;主机号中借位作为子网号&lt;/strong&gt;，这样就可以完成分组了。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;子网掩码&lt;/strong&gt;可以表明分类IPv4地址的主机号部分被借用了几个比特作为子网号。&lt;/p&gt;
&lt;p&gt;• 与IPv4地址类似，子网掩码也是由&lt;strong&gt;32比特&lt;/strong&gt;构成的。&lt;/p&gt;
&lt;p&gt;￮ 用左起多个&lt;strong&gt;连续的比特1&lt;/strong&gt;对应IPv4地址中的&lt;strong&gt;网络号和子网号。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 之后的多个&lt;strong&gt;连续的比特0&lt;/strong&gt;对应IPv4地址中的&lt;strong&gt;主机号。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 将划分子网的&lt;strong&gt;IPv4地址与相应的子网掩码&lt;/strong&gt;进行逐比特的&lt;strong&gt;逻辑与运算&lt;/strong&gt;，就可&lt;strong&gt;得到&lt;/strong&gt;该IPv4地址所在的&lt;strong&gt;子网的网络地址&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;划分后的子网主机号部分全0和全1依然代表网络地址和广播地址。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;默认子网掩码&lt;/strong&gt;是指在&lt;strong&gt;未划分子网的情况下使用的子网掩码。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4.无分类编址方法CIDR&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 舍弃了网络号的概念，地址构成改为&lt;strong&gt;网络前缀+主机号&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;网络前缀是不定长的&lt;/strong&gt;，仅从IPv4地址自身是无法确定其网络前缀和主机号的，需要配合使用32比特的&lt;strong&gt;地址掩码&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 无分类编址方法使用的地址掩码与划分子网使用的子网掩码类似，由32比特构成&lt;/p&gt;
&lt;p&gt;￮ 用左起多个&lt;strong&gt;连续的比特1&lt;/strong&gt;对应IPv4地址中的&lt;strong&gt;网络前缀。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 之后的多个&lt;strong&gt;连续的比特0&lt;/strong&gt;对应IPv4地址中的&lt;strong&gt;主机号。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 在IPv4地址后面加上斜线“/”，斜线后面写上网络前缀所占的比特数量。&lt;/p&gt;
&lt;p&gt;• CIDR的好处：&lt;/p&gt;
&lt;p&gt;￮ 可以根据客户的需要&lt;strong&gt;分配适当大小的CIDR地址块。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;路由聚合（即构造超网）&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;▪ 即取几个网络的最大前缀作为路由器的一个表项，节省空间。&lt;/p&gt;
&lt;p&gt;• 若路由器查表转发分组时发现由多条路由条目匹配，则&lt;strong&gt;选择网络前缀最长的那条路由条目匹配&lt;/strong&gt;，这称为最长前缀匹配。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;四、IPv4地址与MAC地址关系&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps41.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.数据报传送过程中IPv4地址与MAC地址的变化情况&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps42.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 在数据报的传送过程中，数据报的&lt;strong&gt;源IP地址和目的IP地址保持不变。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 在数据报的传送过程中，数据报的&lt;strong&gt;源MAC地址和目的MAC地址逐链路（或逐网络）改变。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;路由器有多个MAC地址。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;路由器每个接口对应一个网络，网络内的通信无需路由器完成。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.IPv4地址与MAC地址关系&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;如果仅使用MAC地址&lt;/strong&gt;进行通信，则会出现以下主要问题：&lt;/p&gt;
&lt;p&gt;￮ 因特网中的每台路由器的&lt;strong&gt;路由表&lt;/strong&gt;中就必须&lt;strong&gt;记录&lt;/strong&gt;因特网上&lt;strong&gt;所有主机和路由器各接口的MAC地址。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 包含海量MAC地址的路由信息需要路由器具备极大的存储空间，并且会给分组的查表转发带来非常大的传输时延。&lt;/p&gt;
&lt;p&gt;• 因特网的网际层&lt;strong&gt;使用IP地址进行寻址&lt;/strong&gt;，就可使因特网中各&lt;strong&gt;路由器&lt;/strong&gt;的路由表中的路由记录的数量大大减少，因为&lt;strong&gt;只需记录部分网络的网络地址&lt;/strong&gt;，而不是记录每个网络中各通信设备的各接口的MAC地址。&lt;/p&gt;
&lt;p&gt;￮ 路由器收到IP数据报后，根据其首部中的目的IP地址的网络号部分，给予自己的路由表进行查表转发。&lt;/p&gt;
&lt;p&gt;￮ 查表转发的结构是可以指明IP数据包的下一跳路由器的IP地址，但无法指明该IP地址所对应的MAC地址。需要使用&lt;strong&gt;地址解析协议ARP&lt;/strong&gt;解决。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;五、地址解析协议ARP&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• ARP作用：在&lt;strong&gt;一个局域网内部&lt;/strong&gt;，可以&lt;strong&gt;通过ARP协议查询到一个IP地址对应的MAC地址。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• ARP表：&lt;/p&gt;
&lt;p&gt;￮ 记录&lt;strong&gt;IP地址和MAC地址&lt;/strong&gt;之间的映射关系。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;每台主机、每台路由器都有自己的ARP表。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 需要定期更新ARP表项。&lt;/p&gt;
&lt;p&gt;• 过程：&lt;/p&gt;
&lt;p&gt;￮ ARP请求分组&lt;/p&gt;
&lt;p&gt;▪ 内容：提供自己的IP地址和MAC地址，并指明要找对象的IP地址&lt;/p&gt;
&lt;p&gt;▪ ARP请求分组封装进MAC帧，&lt;strong&gt;为广播帧&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ ARP相应分组&lt;/p&gt;
&lt;p&gt;▪ 内容：被找对象的MAC帧&lt;/p&gt;
&lt;p&gt;▪ ARP请求分组封装进MAC帧，&lt;strong&gt;为单播帧&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;六、IP数据报的发送和转发流程&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• IP数据报的发送和转发过程主要包含以下两个过程&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;主机&lt;/strong&gt;发送IP数据报&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;路由器&lt;/strong&gt;转发IP数据报&lt;/p&gt;
&lt;p&gt;• 同一网络下的主机通信，属于&lt;strong&gt;直接交付&lt;/strong&gt;；不同网络下的主机通信，属于&lt;strong&gt;间接交付。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 判断目的主机与自己是否在同一网络下：&lt;strong&gt;比对网络号&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;IP数据报转发流程：&lt;/strong&gt;￮ 先判断&lt;strong&gt;目的地址的网络号与自己是否一致&lt;/strong&gt;（目的地址与子网掩码相与）▪ 若&lt;strong&gt;一致&lt;/strong&gt;，则直接在本地网络进行通信，&lt;strong&gt;不需要路由器介入&lt;/strong&gt;**。&lt;strong&gt;▪ 若&lt;/strong&gt;不一致**，则将数据报&lt;strong&gt;交给路由器&lt;/strong&gt;，进入间接交付流程。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.间接交付流程&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 每个网络中有一个指定的路由器，称为&lt;strong&gt;默认网关&lt;/strong&gt;，负责转发该网络的数据报。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;默认路由的目的地址和子网掩码都是0.0.0.0&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 路由器基于&lt;strong&gt;IP数据报首部中的目的地址&lt;/strong&gt;在路由表中进行查询&lt;/p&gt;
&lt;p&gt;￮ 若找到匹配的路由条目，则按该路由条目的指示进行转发。&lt;/p&gt;
&lt;p&gt;￮ 否则丢弃该IP数据报，并向发送该IP数据报的源主机发送差错报告。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps43.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 路由器查询过程：&lt;/p&gt;
&lt;p&gt;￮ 将&lt;strong&gt;目的地址&lt;/strong&gt;与表中各表项的&lt;strong&gt;地址掩码&lt;/strong&gt;进行&lt;strong&gt;相与&lt;/strong&gt;操作&lt;/p&gt;
&lt;p&gt;￮ 得到的结果与该表项的目的网络进行比对。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;比对正确，则用相应接口于目的主机（或下一个路由器）进行ARP协议以获得MAC地址。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 路由器不转发广播IP数据报，即&lt;strong&gt;路由器隔离广播域。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;七、IPv4数据报的首部格式&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 在TCP/IP标准中，各种数据格式常常&lt;strong&gt;以32比特（即4字节）为单位&lt;/strong&gt;来描述。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps44.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 固定部分是指&lt;strong&gt;每个IPv4数据报都必须要包含的部分。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 版本字段：长度为4个比特，用来表示IP协议的版本。&lt;/p&gt;
&lt;p&gt;￮ 通信双方使用的IP协议的版本必须一致。目前广泛使用的是IPv4。&lt;/p&gt;
&lt;p&gt;• 首部长度：长度为4个比特，该字段的取值以&lt;strong&gt;4字节为单位&lt;/strong&gt;，用来表示IPv4数据报的首部长度。&lt;/p&gt;
&lt;p&gt;• 可选字段：长度从1字节到40字节不等，用来支持排错、测量以及安全措施等功能。&lt;/p&gt;
&lt;p&gt;• 填充字段：&lt;strong&gt;用来确保IPv4数据报的首部长度是4的整数倍&lt;/strong&gt;，使用全0进行填充。&lt;/p&gt;
&lt;p&gt;• 区分服务：长度8比特，用来获得更好的服务，实际上一直没有被使用过。&lt;/p&gt;
&lt;p&gt;• 总长度：长度为16比特，该字段的取值&lt;strong&gt;以字节为单位&lt;/strong&gt;，用来表示&lt;strong&gt;IPv4数据报的长度（首部长度+数据载荷长度）。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;以太网帧的最大传输单元MTU为1500B。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;IP数据报首部长度20-60字节。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 标识、标志和片偏移：&lt;strong&gt;共同用于IPv4数据报分片。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 标识：长度为16比特，属于同一个IPv4数据报的&lt;strong&gt;各分片数据报应该具有相同的标识。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 标志：&lt;/p&gt;
&lt;p&gt;▪ 最低位&lt;strong&gt;MF（More Fragment）&lt;/strong&gt;：1表示本分片&lt;strong&gt;后面还有分片&lt;/strong&gt;；0表示本分片&lt;strong&gt;后面没有分片&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;▪ 中间为&lt;strong&gt;DF（Dont Fragment）&lt;/strong&gt;：1表示&lt;strong&gt;不允许分片&lt;/strong&gt;；0表示&lt;strong&gt;允许分片。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;▪ 最高位为保留位，必须设置为0。&lt;/p&gt;
&lt;p&gt;▪ DF为1且分组长度过大时，丢弃该分组，并且&lt;strong&gt;向源主机发送ICMP差错报告报文&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 片偏移：长度为13个比特，该字段的取值&lt;strong&gt;以8字节为单位&lt;/strong&gt;，用来指出分片IPv4数据报的数据载荷&lt;strong&gt;偏移其在原IPv4数据报的位置有多远。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;▪ &lt;strong&gt;除了最后一个分片以外，每个分片的长度一定是8B的整数倍。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 生存时间TTL：长度为8比特， &lt;strong&gt;以跳数为单位&lt;/strong&gt;，路由器收到待转发的IPv4数据报时，将其首部中的该字段的值减1，&lt;strong&gt;若结果不为0就转发，否则就丢弃。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ TTL的作用是防止被错误路由的IPv4数据报无限制的在因特网中兜圈。&lt;/p&gt;
&lt;p&gt;• 协议：长度为8个比特，用来指明IPv4数据报的&lt;strong&gt;数据载荷是何种协议数据单元PDU。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ ICMP（1）&lt;/p&gt;
&lt;p&gt;￮ TCP（6）&lt;/p&gt;
&lt;p&gt;￮ UDP（17）&lt;/p&gt;
&lt;p&gt;￮ IGMP（2）&lt;/p&gt;
&lt;p&gt;￮ OSPF（89）&lt;/p&gt;
&lt;p&gt;• 首部检验和：长度为16个比特，用于检测IPv4数据报在传输过程中其&lt;strong&gt;首部****是否出现了差错。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 接收方发生先检验和出错后，就&lt;strong&gt;直接丢弃该数据报，不会发送差错报告。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ IPv4数据报每经过一个路由器，其首部中的某些字段的值（例如生存时间TTL、标志以及片偏移等） 都可能发生变化，因此&lt;strong&gt;路由器都要重新计算一下首部检验和。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.首部检验和的计算方法&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 发送端&lt;/p&gt;
&lt;p&gt;￮ 将IPv4报首部划 分为若干16比特字的序列。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;将首部检验和字段的值置为全0。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 用&lt;strong&gt;反码算数运算求和&lt;/strong&gt;把所有16比特字相加。&lt;/p&gt;
&lt;p&gt;￮ 将得到的和&lt;strong&gt;取反码&lt;/strong&gt;，就得到了16比特检验和。&lt;/p&gt;
&lt;p&gt;• 接收端：&lt;/p&gt;
&lt;p&gt;￮ 用&lt;strong&gt;反码算数运算求和&lt;/strong&gt;把所有16比特字相加。&lt;/p&gt;
&lt;p&gt;￮ 将得到的和取反码，就得到了接收方检验和的&lt;strong&gt;检验结果。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;结果为0表示无差错，否则表示出现差错。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;二进制反码求和运算&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;即普通加法，但在最高位有进位的时候结果加一。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;八、静态路由配置&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 静态路由配置是指&lt;strong&gt;人工配置路由表。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps45.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 默认路由：&lt;/p&gt;
&lt;p&gt;￮ 使用一条&lt;strong&gt;默认路由条目&lt;/strong&gt;，替代了去往因特网中众多网络的海量路由条目。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;默认路由的优先级最低，网络前缀为/0。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 特定主机路由：&lt;/p&gt;
&lt;p&gt;￮ 出于某种安全问题的考虑，同时为了使网络运维人员更方便地控制网络和测试网络，特别是在对网络的连接或路由表进行排错时，指明到某一台主机的特定主机路由时十分有用的。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;特定路由网络优先级最高，网络前缀为/32。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;九、路由选择协议概述&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;路由选择即创建路由表的方法。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 静态路由选择&lt;/p&gt;
&lt;p&gt;￮ 采用&lt;strong&gt;人工配置&lt;/strong&gt;的方式给路由器添加网络路由、默认路由和特定主机路由等路由条目。&lt;/p&gt;
&lt;p&gt;￮ 静态路由选择&lt;strong&gt;简单、开销小&lt;/strong&gt;，但&lt;strong&gt;不能即时适应网络状态（流量、拓扑）的变换。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 静态路由选择一般只在&lt;strong&gt;小规模网络&lt;/strong&gt;中采用。&lt;/p&gt;
&lt;p&gt;• 动态路由选择&lt;/p&gt;
&lt;p&gt;￮ 路由器通过路由选择协议&lt;strong&gt;自动获取&lt;/strong&gt;路由信息。&lt;/p&gt;
&lt;p&gt;￮ 动态路由选择比较复杂、开销比较大，但&lt;strong&gt;能较好的适应网络状态的变化。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 动态路由选择适用于&lt;strong&gt;大规模网络。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 因特网所采取的路由选择协议具有以下三个主要特点：&lt;/p&gt;
&lt;p&gt;￮ 采用&lt;strong&gt;动态路由&lt;/strong&gt;选择，能较好地适应网络状态的变化。&lt;/p&gt;
&lt;p&gt;￮ 各路由器之间通过相互间的信息交互，&lt;strong&gt;共同完成路由信息的获取和更新。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 将整个因特网划分为许多较小的&lt;strong&gt;自治系统（AS）。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;▪ 自治系统间的路由选择称为&lt;strong&gt;域间路由选择&lt;/strong&gt;。使用外部网关协议**EGP（Exterior Gateway Protocol）**类别的协议。&lt;/p&gt;
&lt;p&gt;▪ 自治系统内的路由选择称为&lt;strong&gt;域内路由选择&lt;/strong&gt;。使用内部网关协议**IGP（Interior Gateway Protocol）**类别的协议。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;十、路由信息协议RIP&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• RIP（Routing Information Protocol）要求自治系统AS内的每一个路由器，都要维护从它自己到AS内其他每一个网络的距离记录。这是一组距离，称为&lt;strong&gt;距离向量。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• RIP报文需要由&lt;strong&gt;运输层用户数据报协议UDP&lt;/strong&gt;封装。&lt;/p&gt;
&lt;p&gt;• RIP使用&lt;strong&gt;跳数&lt;/strong&gt;作为度量来衡量到达目的网络的&lt;strong&gt;距离&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ RIP将路由器&lt;strong&gt;到直连网络&lt;/strong&gt;的&lt;strong&gt;距离定义为1&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ RIP将路由器到&lt;strong&gt;非直连网络&lt;/strong&gt;的&lt;strong&gt;距离定义为所经过的路由器数加1。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ RIP允许一条路径最多只能包含15个路由器，&lt;strong&gt;距离等于16时相当于不可达&lt;/strong&gt;。因此&lt;strong&gt;RIP只适用于小型互联网。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• RIP认为&lt;strong&gt;好的路由&lt;/strong&gt;就是“距离短”的路由，也就是所&lt;strong&gt;通过路由器数量最少的路由。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 当到达同一目的网络有多条RIP距离相等的路由时，可以进行**等价负载均衡，**也就是将通信量均衡地分布到多条等价的路径上。&lt;/p&gt;
&lt;p&gt;• RIP具有以下&lt;strong&gt;三条重要特点&lt;/strong&gt;：&lt;/p&gt;
&lt;p&gt;￮ 交换信息对象：仅和&lt;strong&gt;相邻路由器&lt;/strong&gt;交换信息。&lt;/p&gt;
&lt;p&gt;￮ 交换信息：路由器自己的&lt;strong&gt;路由表。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;▪ 即本路由器到所在的自治系统AS中各网络的最短RIP距离，以及到个网络应经过的下一跳路由器。&lt;/p&gt;
&lt;p&gt;￮ 何时交换信息：&lt;strong&gt;周期性交换&lt;/strong&gt;（例如，每隔30秒）&lt;/p&gt;
&lt;p&gt;▪ 为了加快RIP的收敛速度，当网络拓扑发生变化时，路由器要及时向相邻路由器通告拓扑变化后的路由信息，这称为触发更新。&lt;/p&gt;
&lt;p&gt;• RIP工作流程：&lt;/p&gt;
&lt;p&gt;￮ 刚开始工作时，&lt;strong&gt;只知道自己到直连网络的RIP距离为1。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 每个路由器&lt;strong&gt;仅和相邻路由器周期性地交换并更新路由信息。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 若干次交换和更新后，&lt;strong&gt;每个路由器都知道到达本自治系统AS内各网络的最短距离和下一跳路由器&lt;/strong&gt;，称为&lt;strong&gt;收敛。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;路由表更新规则：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 在路由器A向路由器B转发路由表时，&lt;strong&gt;抹去“下一跳”对象&lt;/strong&gt;，&lt;strong&gt;路由器A无需关心此项内容，只需要在更新路由表时将下一跳更改为B，并且距离加一即可。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;相同的下一跳, 最新消息&lt;/strong&gt;，要更新到达目的网络。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;发现了新的网络&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;▪ 到达目的网络，&lt;strong&gt;不同的下一跳&lt;/strong&gt;，&lt;strong&gt;新路由优势&lt;/strong&gt;，要更新&lt;/p&gt;
&lt;p&gt;▪ 到达目的网络，&lt;strong&gt;不同的下一跳&lt;/strong&gt;，&lt;strong&gt;RIP距离相等，可以等价负载均衡&lt;/strong&gt;, 添加&lt;/p&gt;
&lt;p&gt;▪ 到达目的网络，&lt;strong&gt;不同的下一跳&lt;/strong&gt;，&lt;strong&gt;新路由劣势&lt;/strong&gt;, &lt;strong&gt;不更新&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 当路由器收到相邻路由器发来的路由更新信息时，若发现有更有的路由，则&lt;strong&gt;直接更新&lt;/strong&gt;自己的路由表，并向其他相邻路由器&lt;strong&gt;广播自己的新路由&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• RIP的缺点：&lt;strong&gt;“坏消息传得慢&amp;rdquo;&lt;/strong&gt;，可以采取以下多种措施减少出现该问题的概率。&lt;/p&gt;
&lt;p&gt;￮ 限制最大RIP距离为15.(16为不可达)。&lt;/p&gt;
&lt;p&gt;￮ 当路由表发生变化时就立即发送路由更新报文(即&amp;quot;&lt;strong&gt;触发更新&lt;/strong&gt;&amp;quot;)，而不是周期性发送。&lt;/p&gt;
&lt;p&gt;￮ 让路由器记录收到某个特定路由信息的接口，而不是让同一路由信息通过此接口反方向传送（即“&lt;strong&gt;水平分割&lt;/strong&gt;”）。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;十一、开放最短路径优先OSPF&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 开放最短路径优先（Open Shortest Path First）协议是为了克服路由信息协议RIP的缺点而开发出来的。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;OSPF报文由IP协议封装&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ “开放”是指该协议并不是受某一厂商控制，而是公开发表的。&lt;/p&gt;
&lt;p&gt;￮ “最短路径优先”是因为使用了迪杰斯特拉提出的最短路径算法。&lt;/p&gt;
&lt;p&gt;• OSPF是基于&lt;strong&gt;链路状态&lt;/strong&gt;的，而不像RIP是基于距离向量的。&lt;/p&gt;
&lt;p&gt;• OSPF会把链路状态信息用洪泛法发送给网络中的&lt;strong&gt;所有其他路由器&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 若到同一个目的网络有多条相同代价的路径，则可&lt;strong&gt;将通信量分配给这几条路径。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• OSPF不限制网络规模，更新效率高，收敛速度快。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;在链路状态发生变化时进行发送。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.OSPF路由器邻居关系的建立和维护&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• OSPF相邻路由器之间通过交互&lt;strong&gt;问候分组&lt;/strong&gt;来建立和维护&lt;strong&gt;邻居关系&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 问候分组封装在&lt;strong&gt;IP数据报&lt;/strong&gt;中，发往&lt;strong&gt;组播地址224.0.0.5&lt;/strong&gt;。IP数据报首部中的协议号字段取值为89，表明IP数据报的数据载荷为OSPF分组。&lt;/p&gt;
&lt;p&gt;￮ 问候分组的&lt;strong&gt;发送周期为10秒&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 若&lt;strong&gt;40秒&lt;/strong&gt;未收到来自邻居路由器的问候分组，则认为邻居路由器不可达。&lt;/p&gt;
&lt;p&gt;￮ 每个路由器都会建立一张&lt;strong&gt;邻居表&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.链路状态通告LSA&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 使用OSPF的每个路由器都会产生&lt;strong&gt;链路状态通告&lt;/strong&gt;（Link State Advertisement，LSA），&lt;strong&gt;而不是像RIP一样交换整个路由表。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• LAS包含以下两类链路状态信息：&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;直连网络&lt;/strong&gt;的链路状态信息。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;邻居路由器&lt;/strong&gt;的链路状态信息。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.链路状态更新分组LSU&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 链路状态通告LSA被封装在&lt;strong&gt;链路状态更新&lt;/strong&gt;（Link State Update，LSU）分组中，采用&lt;strong&gt;可靠的洪泛法&lt;/strong&gt;进行发送。&lt;/p&gt;
&lt;p&gt;￮ 洪泛法的要点是路由器&lt;strong&gt;向自己所有的邻居路由器发送链路状态更新分组&lt;/strong&gt;，受到该分组的各路由器又将该分组转发给自己所有的邻居路由器（上游路由器除外），以此类推。&lt;/p&gt;
&lt;p&gt;￮ 可靠是指收到链路状态更新分组后要发送确认，&lt;strong&gt;收到重复的更新分组无需再次转发&lt;/strong&gt;，但要发送一次确认。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4.链路状态数据库LSDB&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 使用OSPF的每一个路由器都有一个链路状态数据库LSDB，用于&lt;strong&gt;存储链路状态通告LSA。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;通过各路由器洪泛发送封装有各自链路状态通告LSA的链路状态更新分组LSU，各路由器的链路状态数据库LSDB最终将达到一致。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;5.基于链路状态数据库进行最短路径优先算法&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 使用OSPF的各路由器，&lt;strong&gt;基于链路状态数据库LSDB进行最短路径优先算法&lt;/strong&gt;，构建出各自到达其他各路由器的最短路径，即&lt;strong&gt;构建各自的路由表&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 虽然计算出了完整的最优路径，但路由表中不会存储完整路径，&lt;strong&gt;只存储下一跳。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;6.OSPF的五种分组类型与基本工作过程&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps46.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps47.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;7.多点接入网络中的OSPF路由器&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 为了&lt;strong&gt;减少所发送问候分组和链路状态更新分组的数量&lt;/strong&gt;，OSPF采用以下措施：&lt;/p&gt;
&lt;p&gt;￮ 选举&lt;strong&gt;指定路由器&lt;/strong&gt;和&lt;strong&gt;备用的指定路由器&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;所有的非DR/BDR只与DR/BDR建立邻居关系。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;非DR/BDR之间只能通过DR/BDR交换信息。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;8.OSPF划分区域&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 为了使OSPF协议能够用于规模很大的网络，OSPF&lt;strong&gt;把一个自治系统AS再划分为若干个更小的范围&lt;/strong&gt;，称为&lt;strong&gt;区域&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 划分区域的好处是&lt;strong&gt;把利用洪泛法交换链路状态信息的范围局限于每一个区域&lt;/strong&gt;，而不是整个自治系统AS，这样就&lt;strong&gt;减少了整个网络上的通信量&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 区域中的路由器仅知道如何将分组路由到自己所在区域内的目标地址，对于其他区域内的结构&lt;strong&gt;毫不知情&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 划分区域的缺点是，增加了交换信息的种类，&lt;strong&gt;使得OSPF更加复杂&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 主干区域中，有一个路由器&lt;strong&gt;专门和本自助系统外的其他自治系统交换路由信息&lt;/strong&gt;，称为&lt;strong&gt;自治系统给边界路由器。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 主干区域中的路由器称为&lt;strong&gt;主干路由器&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 路由器的所有接口都在同一个区域内，则称为&lt;strong&gt;区域内路由器&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 和其他区域进行通信的路由器称为&lt;strong&gt;区域边界路由器&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;十二、边界网关协议BGP&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 边境网关协议（Border Geteway Protocol）属于外部网关协议EGP这个类别，&lt;strong&gt;用于自治系统AS之间的路由选择协议&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• AS之间的路由选择必须考虑相关策略。因此BGP只能是力求寻找一条能够到达目的网络且比较好的路由（即不兜圈子），而&lt;strong&gt;并非要寻找一条最佳路由&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 跨越两个AS的BGP会话称为&lt;strong&gt;外部BGP&lt;/strong&gt;，同一AS中的两个路由器之间的BGP会话称为&lt;strong&gt;内部BGP&lt;/strong&gt;会话。&lt;/p&gt;
&lt;p&gt;• BGP的报文被&lt;strong&gt;封装到TCP协议的分组中&lt;/strong&gt;进行传输。&lt;/p&gt;
&lt;p&gt;• 配置BGP时，每个AS的管理员要选择至少一个路由器作为该AS的“&lt;strong&gt;BGP发言人&lt;/strong&gt;”。&lt;/p&gt;
&lt;p&gt;• 一般来说，两个BGP发言人都是通过一个共享网络连接在一起的，而BGP发言人往往就是&lt;strong&gt;BGP边界路由器&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 使用&lt;strong&gt;TCP连接&lt;/strong&gt;交换路由信息的两个BGP发言人，彼此称为对方的&lt;strong&gt;邻站或对等站。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• BGP发言人除了允许BGP协议外，还必须运行自己所在AS所使用的内部网关协议，如RIP或OSPF。&lt;/p&gt;
&lt;p&gt;• BGP发言人交换网络可达性的信息后，各BGP发言人&lt;strong&gt;根据&lt;/strong&gt;所采用的&lt;strong&gt;策略&lt;/strong&gt;，从收到的路由信息中&lt;strong&gt;找出到达个自治系统的较好的网络&lt;/strong&gt;，也就是构造出树形结构且&lt;strong&gt;不存在环路的自治系统连通图&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.BGP路由&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 最重要的两个BGP属性是&lt;strong&gt;AS-PARH和NEXT-HOP。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• AS-PATH是通告BGP路由所经过的自治系统，BG&lt;strong&gt;P必须指出通过哪些AS&lt;/strong&gt;，而&lt;strong&gt;不必指出路由要通过哪些路由器。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• NEXT-HOP是&lt;strong&gt;通告BGP的路由起点&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.BGP路由选择&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;首选&lt;strong&gt;本地偏好值最高&lt;/strong&gt;的路由&lt;/li&gt;
&lt;li&gt;选择&lt;strong&gt;AS跳数最少&lt;/strong&gt;的路由&lt;/li&gt;
&lt;li&gt;使用&lt;strong&gt;热土豆路由选择算法&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;￮ 即本地偏好相同，所经过AS个数也相同的情况下，使用热土豆路由算法。&lt;/p&gt;
&lt;p&gt;￮ 选择&lt;strong&gt;最靠近NEXT-HOP路由器的路由&lt;/strong&gt;，让分组经过&lt;strong&gt;最少的转发次数&lt;/strong&gt;离开本AS，这是会使用内部网关协议，对不同路由器得出的选择结果是不同的。&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;选择BGP标识符的数值最小的路由&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;3.BGP-4的四种报文&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 打开OPEN:用来与相邻的另一个BGP发言人建立关系，使通信初始化。&lt;/p&gt;
&lt;p&gt;• 保活KEEPALIVE：用来周期性证实邻站的连通信。&lt;/p&gt;
&lt;p&gt;• 更新UPDATE：用来通告某一条路由的信息，以及列出要撤销的多条路由。&lt;/p&gt;
&lt;p&gt;• 通知NOTIFICATION：用来发送检测到的差错。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;十三、路由器的基本工作原理&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 路由器是一种具有多个输入端口和输出端口的专用计算机，其任务是转发分组。&lt;/p&gt;
&lt;p&gt;• 路由器由路由选择部分和分组转发部分构成。&lt;/p&gt;
&lt;p&gt;• 实现交换结构的三种基本方式是：&lt;strong&gt;通过存储器&lt;/strong&gt;、&lt;strong&gt;通过总线&lt;/strong&gt;以及&lt;strong&gt;通过互连网络&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps48.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;路由器工作流程&lt;/strong&gt;• 信号由某个输入端口进入路由器，物理层将信号转换成比特流后，向上交付给数据链路层处理。• 数据链路层从比特流中识别出帧，去掉帧头和帧尾后，向上交付给网络层处理。• 按照网络层接收到的不同分组有两种转发方式a. 如果交付给网络层处理的分组是&lt;strong&gt;普通待转发的数据分组&lt;/strong&gt;，则根据分组首部中的目的地址进行查表转发，若找不到匹配的转发条目，就丢弃该分组，否则按照匹配条目中所指示的端口进行转发。转发表应当使查找过程最优化。b. 如果交付给网络层处理的分组是&lt;strong&gt;携带有路由报文的路由分组&lt;/strong&gt;，则把路由分组送交路由选择处理机，路由选择处理机根据路由报文的内容，来更新自己的路由表。路由表一般只包含从目的网络到下一跳的映射，路由表需要对网络拓扑变化的计算最优化。路由选择处理机还会周期性地给其他路由器发送自己所知道的路由信息。• 网络层更新数据分组首部中的某些字段的值，如TTL、首部检验和等字段的值。• 向下交给数据链路层，封装成帧后，交付给物理层。• 物理层将帧看成比特流，将其变换成相应的电信号发送出去。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;十四、网际控制报文协议ICMP&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 为了更&lt;strong&gt;有效地转发IP数据报&lt;/strong&gt;以及提高IP数据报交付成功的机会，TCP/IP体系结构的网际层使用了&lt;strong&gt;网际控制报文协议&lt;/strong&gt;（Internet Control Message Protocol）。&lt;/p&gt;
&lt;p&gt;• 主机或路由器使用ICMP来发送&lt;strong&gt;差错报告报文和询问报文&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• ICMP报文被封装在&lt;strong&gt;IP数据报&lt;/strong&gt;中发送。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.ICMP差错报告报文&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;终点不可达&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 当路由器或主机&lt;strong&gt;不能交付&lt;/strong&gt;IP数据报时，就向原点发送重点不可达报文。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;源点抑制&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 当路由器或主机由于&lt;strong&gt;拥塞&lt;/strong&gt;而丢弃IP数据报时，就向发送该IP数据报的源点发送源点抑制报文。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;时间超时&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 当路由器收到一个目的IP地址不是自己的IP数据报时，会将其首部中生存时间TTL字段的值减1。若结果不为0，则路由器将该数据报转发出去；&lt;strong&gt;若结果为0&lt;/strong&gt;，路由器不但要丢弃该数据报，还要向发送该IP数据报的源点发送超时报文。&lt;/p&gt;
&lt;p&gt;￮ 当终点在预先规定的时间内未能收到一个数据报的全部数据报分片时，就把已收到的数据报片都&lt;strong&gt;丢弃&lt;/strong&gt;，也会向源点发送时间超过（超时）报文。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;参数问题&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 当路由器或目的主机收到IP数据报后，发现其&lt;strong&gt;首部有不正确的字段值&lt;/strong&gt;时，就丢弃该数据报，并&lt;strong&gt;向发送该数据报的源点发送参数问题报文&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;改变路由（重定向）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 路由器把改变路由报文发送给主机，&lt;strong&gt;让主机知道下次应将IP数据报发送给另外的路由器&lt;/strong&gt;，这样就可以&lt;strong&gt;通过更好的路由到达目的主机。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 以下情况&lt;strong&gt;不应发送ICMP差错报告报文：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 对ICMP差错报告报文不在发送ICMP差错报告报文。&lt;/p&gt;
&lt;p&gt;￮ 对第一个分片的IP数据报片的所有后续数据报片都不发送ICMP差错报告报文。&lt;/p&gt;
&lt;p&gt;￮ 对具有多播地址的IP数据报都不发送ICMP差错报告报文。&lt;/p&gt;
&lt;p&gt;￮ 对具有特殊地址的IP数据报都不发送ICMP差错报告报文。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.ICMP询问报文&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 回送请求和回答&lt;/p&gt;
&lt;p&gt;￮ 由主机或路由器向一个特定的目的主机或路由器发出。&lt;/p&gt;
&lt;p&gt;￮ 收到此报文的主机或路由器必须给发送该报文的源主机或路由器发送ICMP会送回答报文。&lt;/p&gt;
&lt;p&gt;￮ 这种询问报文&lt;strong&gt;用来测试目的站是否可达以及了解其有关状态。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 时间戳请求和回答&lt;/p&gt;
&lt;p&gt;￮ 用来请求某个主机或路由器回答当前的日期和时间。&lt;/p&gt;
&lt;p&gt;￮ 这种询问报文用来进行&lt;strong&gt;追踪路由。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.ICMP经典应用——分组网间探测PING&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 分组网间探测PING用来&lt;strong&gt;测试主机或路由器之间的连通性。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 应用层&lt;strong&gt;直接使用网际层ICMP&lt;/strong&gt;，并不适用运输层的TCP或UDP。&lt;/p&gt;
&lt;p&gt;￮ PING应用所&lt;strong&gt;使用的ICMP报文类型为****回送请求和回答&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4.ICMP经典应用——跟踪路由&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 跟踪路由应用traceroute，用于&lt;strong&gt;探测IP数据报从源主机到达目的主机需要经过哪些路由器&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 不同操作系统中，traceroute应用的命令和实现机制有所不同：&lt;/p&gt;
&lt;p&gt;￮ UNIX版本中，具体命令为“traceroute”，其在运输层使用&lt;strong&gt;UDP协议&lt;/strong&gt;，在网络层使用ICMP报文类型中&lt;strong&gt;只有差错报告报文&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 在Windows版本中，具体命令为“tracert”，其应用层直接使用网际层的ICMP协议，所使用的ICMP报文类型有&lt;strong&gt;回送请求和回答报文以及差错报告报文。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;十五、网络地址转换NAT&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• VPN:利用&lt;strong&gt;公用的因特网&lt;/strong&gt;作为本结构各专用网络之间的通信载体。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;专用网内的各主机并不应该直接“暴露”于公用的因特网上。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 给专用网内各主机配置的IP地址应该是该&lt;strong&gt;专用网所在机构可以自行分配的IP地址&lt;/strong&gt;，这类IP地址仅在机构内部有效，称为&lt;strong&gt;专用地址&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 因特网中的所有路由器，对目的地址是专用地址的IP数据报一律不进行转发。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.网络地址转换NAT&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• NAT（Network Address Tanslation）能&lt;strong&gt;使大量使用内部专用地址的专用网络用户共享少量外部全球地址来网文因特网上的主机和资源。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• NAT路由器&lt;strong&gt;至少要有一个有效的外部全球地址IP。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 所有使用内部专用地址的主机，在和因特网通信时，都要在NAT路由器上将&lt;strong&gt;内部专用地址&lt;/strong&gt;转换成&lt;strong&gt;外部全球地址&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.基本NAT方法&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;内部主机在与外网通信时，一一对应于一个全球地址IP。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 在私有IP地址向全球IP地址转化时，使用的是&lt;strong&gt;路由器外部接口的IP地址&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;缺点&lt;/strong&gt;：如果NAT路由器拥有n个全球IP地址，那么&lt;strong&gt;专用网内最多可以同时有N台主机接入因特网。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.网络地址与端口号转换方法&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 将NAT转换和&lt;strong&gt;运输层端口号&lt;/strong&gt;结合使用。 即&lt;strong&gt;大量主机共用NAT路由器上的1个全球IP地址。 这种方法称为NAPT。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• NAT转换表中存放着&lt;strong&gt;本地地址端口&lt;/strong&gt;到&lt;strong&gt;全球地址端口&lt;/strong&gt;的&lt;strong&gt;映射&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• NAPT路由器还会对源端口号重新动态分配。端口号仅在本地主机中才有意义。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;使用不同的端口即可实现让不同主机共享一个公网IP。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps49.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps50.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• NAT通信&lt;strong&gt;必须由专用网内部发起，因此拥有内部专用地址的主机不能直接充当因特网中的服务器。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 在&lt;strong&gt;外网主动给与内网主机进行通信&lt;/strong&gt;时，通过NAT需要使用&lt;strong&gt;NAT穿透技术&lt;/strong&gt;来解决。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;十六、IP多播&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;多播&lt;/strong&gt;时一种实现“&lt;strong&gt;一对多&lt;/strong&gt;”通信的技术，与传统单播“一对一”通信相比，多播可以极大的节省网络资源。&lt;/p&gt;
&lt;p&gt;• 在因特网上进行的多播，称为&lt;strong&gt;IP多播&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 在IPv4中，&lt;strong&gt;D类地址被作为多播地址&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;多播地址只能用作目的地址&lt;/strong&gt;，而不能用作源地址。&lt;/p&gt;
&lt;p&gt;• 用每一个D类地址来标识一个多播组，&lt;strong&gt;使用同一个IP多播地址接收IP多播数据报的所有主机就构成了一个多播组。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;每个多播组的成员是可以随时变动的&lt;/strong&gt;，一台主机可以随时加入或离开多播组。&lt;/p&gt;
&lt;p&gt;￮ 多播组成员的&lt;strong&gt;数量和所在的地理位置&lt;/strong&gt;不受限制，&lt;strong&gt;一台主机可以属于几个多播组。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 非多播组成员也可以向多播组发送IP多播数据报。&lt;/p&gt;
&lt;p&gt;• IP多播数据报也是“&lt;strong&gt;尽最大努力交付&lt;/strong&gt;”。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;对于多播数据报不产生ICMP差错报文。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• IP多播可以分为以下两种：&lt;/p&gt;
&lt;p&gt;￮ 只在&lt;strong&gt;本局域网&lt;/strong&gt;上进行的&lt;strong&gt;硬件多播&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 在&lt;strong&gt;因特网&lt;/strong&gt;上进行的&lt;strong&gt;多播&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;十七、局域网硬件多播中的IP地址到MAC地址的映射&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• MAC地址有多播MAC地址这种类型，因此只要&lt;strong&gt;把&lt;strong&gt;&lt;strong&gt;IPv4多播地址&lt;/strong&gt;&lt;/strong&gt;映射成****多播MAC地址&lt;/strong&gt;，即可将IP多播数据报封装在局域网的MAC帧中，而MAC帧首部中的目的MAC地址字段的值，就设置为由IPv4多播地址映射成的&lt;strong&gt;多播MAC地址&lt;/strong&gt;。这样就可以很方便地&lt;strong&gt;利用硬件多播来实现局域网内的IP多播。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps51.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 以太网MAC地址块中，从01-00-5E-00-00-00 到 01-00-5E-7F-FF-FF的多播MAC地址，用于映射IPv4多播地址。&lt;/p&gt;
&lt;p&gt;￮ 这些多播MAC地址的&lt;strong&gt;左起前25个比特都是相同&lt;/strong&gt;的，&lt;strong&gt;剩余23个比特可以任意变化。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;IP多播地址与多播MAC地址的映射关系并不是唯一的&lt;/strong&gt;**。因此受到IP多播数据报的主机还要再网际层利用软件进行过滤，**把不是主机要接收的IP多播数据报丢弃。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps52.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps53.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;十八、在因特网上进行IP多播需要的两种协议&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 要在因特网上进行IP多播，就必须要考虑&lt;strong&gt;IP多播数据报经过多个多播路由器&lt;/strong&gt;进行转发的问题。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;多播路由器&lt;/strong&gt;必须&lt;strong&gt;根据&lt;/strong&gt;IP多播数据报首部中的&lt;strong&gt;IP多播地址&lt;/strong&gt;，将其转发到有该多播组成员的局域网。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;网络组管理协议&lt;/strong&gt;（Internet Group Management Protocol）是TCP/IP体系结构网际层中的协议，其作用是&lt;strong&gt;让连接在本地局域网上的多播路由器知道本局域网上是否由主机（实际上是主机中某个进程）进入或退出了某个多播组。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;IGMP仅在本网络有效&lt;/strong&gt;，使用IGMP&lt;strong&gt;并不能知道&lt;/strong&gt;多播组所包含的&lt;strong&gt;成员数量&lt;/strong&gt;，也不知道多播组的成员都分布在哪些网络中。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;多播路由选择协议&lt;/strong&gt;：在多播路由器之间为每个多播组建立一个&lt;strong&gt;多播转发树&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 多播转发树&lt;strong&gt;连接多播源和所有拥有该多播组成员的路由器。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;IP多播数据报只要沿着多播转发树进行洪泛&lt;/strong&gt;，就能被传送到所有拥有该多播组成员的多播路由器。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;在多部路由器所直连的局域网内&lt;/strong&gt;，多播路由器通过&lt;strong&gt;硬件多播&lt;/strong&gt;，将IP多播数据报发送给该多播组的所有成员。&lt;/p&gt;
&lt;p&gt;• 针对&lt;strong&gt;不同的多播组需要维护不同的多播转发树&lt;/strong&gt;，而且必须&lt;strong&gt;动态地适应多播组成员的变化&lt;/strong&gt;，但此时网络拓扑并不一定发生变化，因此多播路由选择协议比单播路由选择协议（如RIP、OSPF）复杂得多。&lt;/p&gt;
&lt;p&gt;• 即使某主机&lt;strong&gt;不是任何多播组的成员&lt;/strong&gt;，也&lt;strong&gt;可以向任何多播组发送多播数据报&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 为了覆盖多播组的所有成员，多播转发树可能要&lt;strong&gt;经过一些没有多播组成员的路由器。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;十九、网际组管理协议IGMP&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• IGMP（Internet Group Management Protocol）有三种报文类型：&lt;strong&gt;成员报告报文，成员查询报文和离开组报文。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• IGMP报文被封装在&lt;strong&gt;IP数据报&lt;/strong&gt;中传送。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps54.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.IGMP基本工作原理———加入多播组&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;IGMP成员报告报文&lt;/strong&gt;封装在&lt;strong&gt;IP多播数据报****中&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• IP多播数据报封装在&lt;strong&gt;以太网多播帧&lt;/strong&gt;中。&lt;/p&gt;
&lt;p&gt;• IGMP成员报告报文的内容：所&lt;strong&gt;希望加入的多播组的IP多播地址。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• IP多播数据报的目的地址：也是所&lt;strong&gt;希望加入的多播组的IP多播地址。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 以太网多播帧的目的地址：所希望加入的多播组的IP多播地址映射而来的&lt;strong&gt;多播MAC地址。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;IGMP并不能知道多播组所包含的成员数量，也不知道多播组的成员都分布在哪些网络中。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps55.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.IGMP基本工作原理———监视多播组的成员变化&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;多播路由器&lt;/strong&gt;默认&lt;strong&gt;每隔125秒&lt;/strong&gt;就向其直连网络发送一个封装有&lt;strong&gt;IGMP成员查询报文&lt;/strong&gt;的IP多播数据报。&lt;/p&gt;
&lt;p&gt;￮ 各主机在经过&lt;strong&gt;不同延迟&lt;/strong&gt;后，发送&lt;strong&gt;成员报告报文&lt;/strong&gt;作为相应。&lt;/p&gt;
&lt;p&gt;￮ 多播路由器长时间收不到该多播组成员的相应，则将其从多播组列表删除！&lt;/p&gt;
&lt;p&gt;￮ 同一网络中并不是每个多播路由器都要周期性发送IGMP成员查询报文，只需要选择一个作为查询路由器，让查询路由器发就行了。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;IGMP成员查询报文&lt;/strong&gt;封装在&lt;strong&gt;IP多播数据报&lt;/strong&gt;中。&lt;/p&gt;
&lt;p&gt;• IP多播数据报封装在&lt;strong&gt;以太网多播帧&lt;/strong&gt;中。&lt;/p&gt;
&lt;p&gt;• IGMP成员查询报文的内容：&lt;strong&gt;0.0.0.0&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 即表示要查询网络中的&lt;strong&gt;全部多播组&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• IP多播数据报的目的地址：&lt;strong&gt;224.0.0.1&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 是特殊的IP多播地址，在本网络中&lt;strong&gt;所有参加多播的主机和路由器&lt;/strong&gt;都会接收。&lt;/p&gt;
&lt;p&gt;• 以太网多播帧的目的地址：由此特殊的IP多播地址映射而来的多播MAC地址。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.IGMP基本工作原理———退出多播组&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 当主机要退出某个多播组时，可&lt;strong&gt;主动发送一个离开组报文&lt;/strong&gt;而不必等待多播路由器的查询。&lt;/p&gt;
&lt;p&gt;• 路由器收到离开组报文后，暂时不删除该多播组，立即发送针对该多播组的&lt;strong&gt;特殊的IGMP成员查询报文&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;二十、多播路由选择协议&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 多播路由选择协议的主要任务是：&lt;strong&gt;在多播路由器之间为每个多播组建立一个多播转发树。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 目前有以下两种方法来构建多播转发树：&lt;strong&gt;基于源树&lt;/strong&gt;多播路由选择和&lt;strong&gt;组共享树&lt;/strong&gt;多播路由选择。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.基于源树多播路由选择&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 基于源树多播路由选择的最经典算法是&lt;strong&gt;反向路径多播RPM&lt;/strong&gt;算法。&lt;/p&gt;
&lt;p&gt;• RPM算法包含以下两个步骤：&lt;/p&gt;
&lt;p&gt;a. 利用&lt;strong&gt;反向路径广播RPB&lt;/strong&gt;算法构建一个&lt;strong&gt;广播转发树&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;▪ 使用RPB算法生成的广播转发树，不会存在环路。&lt;/p&gt;
&lt;p&gt;▪ 反向路径是指：在计算最短路径时把源点当作终点。&lt;/p&gt;
&lt;p&gt;b. 利用剪枝算法，剪除广播转发树中的下游非成员路由器，获得一个&lt;strong&gt;广播转发树&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.组共享树多播路由选择&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 组共享树多播路由选择采用&lt;strong&gt;基于核心的分布式生成树算法&lt;/strong&gt;来建立共享树。&lt;/p&gt;
&lt;p&gt;￮ 该方法在每个多播组中指定一个&lt;strong&gt;核心路由器&lt;/strong&gt;，以该路由器为&lt;strong&gt;根&lt;/strong&gt;，建立一棵连接多播组的所有成员路由器的&lt;strong&gt;生成树&lt;/strong&gt;，作为多播转发树。&lt;/p&gt;
&lt;p&gt;• 每个多播组中除了核心路由器，其他所有成员路由器都会向自己多播组中的核心路由器单播&lt;strong&gt;加入报文&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 加入报文通过单播朝着核心路由器转发，直到它到达已经属于&lt;strong&gt;该多播生成树的某个节点&lt;/strong&gt;或者&lt;strong&gt;直接到达该核心路由器&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 加入报文所经过的路径，就确定了一条&lt;strong&gt;从单播该报文的边缘节点到核心路由器之间的分支&lt;/strong&gt;，而这个新分支就被&lt;strong&gt;嫁接&lt;/strong&gt;到现有的&lt;strong&gt;多播转发树&lt;/strong&gt;上。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;二十一、移动IP技术概述&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 移动主机在各网络之间漫游时，仍然能够保持其原来的IP地址不变。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps56.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;注意：归属代理的功能是在应用层完成的。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.代理发现与注册&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 移动主机通过自己的&lt;strong&gt;代理发现协议&lt;/strong&gt;与外地代理建立联系，并从外地代理获得一个属于该外地网络的&lt;strong&gt;转交地址&lt;/strong&gt;，同时向外地代理注册自己的&lt;strong&gt;永久地址&lt;/strong&gt;和&lt;strong&gt;归属代理地址&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 外地代理将主机A的永久地址记录在自己的注册表中，并&lt;strong&gt;向移动主机的归属代理注册该移动主机的转交地址&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 归属代理会将移动主机A的转交地址记录下来，此后&lt;strong&gt;归属代理会代替移动主机接收&lt;/strong&gt;所有发送给该移动主机的IP数据报，并&lt;strong&gt;利用IP隧道技术&lt;/strong&gt;将这些数据报&lt;strong&gt;转发给外地网络中的移动主机&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;当移动主机不在归属网络时&lt;/strong&gt;，归属代理会以自己的MAC地址应答所有对该该移动主机的ARP请求，&lt;strong&gt;即归属代理采用ARP代理技术&lt;/strong&gt;。为了使归属网络中其他各主机和路由器能够尽快的更新各自的ARP高速缓存，&lt;strong&gt;归属代理还会主动发送ARP广播&lt;/strong&gt;，&lt;strong&gt;并声称自己是该移动主机&lt;/strong&gt;。这样，所有发送给该移动主机的IP数据报都会发送给归属代理。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.固定主机向移动主机发送IP数据报&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 固定主机B向移动主机A发送一个IP数据报，该数据报会被路由到移动主机A的&lt;strong&gt;归属网络&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 归属代理会代替移动主机A接收该数据报，该数据报的源地址为固定主机B自己的IP地址，目的地址为移动主机A的永久地址。&lt;/p&gt;
&lt;p&gt;• 归属代理将该数据报封装到一个新的IP数据报中，其首部中目的地址为移动主机A的转交地址，即外地代理的IP地址。归属代理将该IP数据报通过IP隧道发送个外地代理。&lt;/p&gt;
&lt;p&gt;• 外部代理收到后，将其数据载荷，即原IP数据报解封出来，根据其目的地址，直接传发给位于外地网络中的移动主机A。&lt;/p&gt;
&lt;p&gt;• 当外地代理和移动主机不是同一台设备时，转交地址实际上是外地代理的地址而不是移动主机的地址，转交地址既不会作为移动主机发送IP数据报的源地址，也不会作为移动主机所接收的IP数据报的目的地址。• 转交地址仅仅是归属代理到外地代理的IP隧道的出口地址。• 使用同一外地代理的移动主机都可以共享同一个转交地址。• 当外地代理从IP隧道中受到并解封出原数据报时，会在自己的代理注册表中查找移动主机的永久地址所对应的MAC地址，并将该数据报封装到目的地址为该MAC地址的帧中发送给移动主机。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.移动主机向固定主机发送IP数据报&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 移动主机向固定主机发送IP数据报时，IP数据报被移动主机&lt;strong&gt;按照正常的发送流程发送&lt;/strong&gt;出去即可。&lt;/p&gt;
&lt;p&gt;• 由于IP路由器并不关心IP数据报的源地址，因此该IP数据报被直接路由到固定主机，而&lt;strong&gt;无须再通过归属代理进行转发&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 因此，移动主机可以将&lt;strong&gt;外地代理&lt;/strong&gt;作为自己的&lt;strong&gt;默认路由器&lt;/strong&gt;，也可以通过代理发现协议从外地代理获取&lt;strong&gt;外地网络中其他路由器&lt;/strong&gt;的地址，并将其设置为自己的&lt;strong&gt;默认路由器&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4.同址转交地址方式&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;外地代理可以直接运行运行在移动主机上。移动主机需要运行额外的外地代理软件。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 外地网络需要提供相应机制，使移动主机能够自动获取一个外地网络中的地址作为自己的IP地址和外地代理的地址，被称为&lt;strong&gt;同址转交地址&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;5.三角形路由问题&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps57.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 即即使在固定主机和移动主机之间存在一条更有效的路径，发往移动主机的IP数据报也要先发送给归属代理，造成IP数据报转发的低效。&lt;/p&gt;
&lt;p&gt;• 解决方案：&lt;/p&gt;
&lt;p&gt;￮ 给固定主机配置一个&lt;strong&gt;通信代理&lt;/strong&gt;。固定主机发送给移动主机的IP数据报，都要通过该&lt;strong&gt;通信代理转发&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 通信代理先从归属代理获取移动主机的转交地址，之后所有发送给移动主机的IP数据报，都利用转交地址直接通过IP山隧道发送给移动主机的外地代理，而无须再通过移动主机的归属代理进行转发。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;二十二、IPv6引进的主要变化&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• IPv4存在的问题：&lt;/p&gt;
&lt;p&gt;￮ IPv4长度为32比特，随着需求的上升，逐渐&lt;strong&gt;不够用&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ IPv4地址早期的编址方式（分类和划分子网）也不过合理，造成IPv4&lt;strong&gt;地址资源的浪费。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.IPv6引进的主要变化&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;更大的地址空间&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ IPv6的地址空间为&lt;strong&gt;128比特&lt;/strong&gt;，在可预见的未来不会用完。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;扩展的地址层次结构&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 可划分为更多的层次，这样可以更好地反映出因特网的拓扑结构，使得&lt;strong&gt;对寻址和路由层次的设计更具有灵活性。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;灵活的首部格式&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 与IPv4首部并不兼容。IPv4定义了许多&lt;strong&gt;可选的拓展首部&lt;/strong&gt;，不仅可提供比IPv4更多的功能，而且还可以&lt;strong&gt;提高路由器的处理效率&lt;/strong&gt;，因为路由器对逐跳拓展首部外的其他拓展首部都不进行处理。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;改进的选项&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ IPv4允许分组&lt;strong&gt;包含有选项的控制信息&lt;/strong&gt;，因而&lt;strong&gt;可以包含一些新的选项&lt;/strong&gt;。然而IPv4规定的选项却是固定不变的。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;允许协议继续扩充&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;支持即插即用（即自动配置）&lt;/strong&gt;：IPv6支持主机或路由器自动配置IPv6地址及其他网络配置参数。因此&lt;strong&gt;IPv6不需要使用DHCP&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;支持资源的预分配&lt;/strong&gt;：IPv6能为实时音视频等要求保证一定带宽和时延的应用，提供&lt;strong&gt;更好的服务质量保证。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;二十三、IPv6数据报的基本首部和扩展首部&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• IPv6将IPv4数据报首部中不必要的功能取消了，这使得&lt;strong&gt;IPv6数据报基本首部中的字段数量减少到只有8个。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;IPv6数据报基本首部的长度增大到40字节。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 取消了首部长度字段，因为&lt;strong&gt;IPv6数据报的首部长度是固定的40字节****。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 取消了标识、标志和片偏移字段，因为这些功能已包含在IPv6数据报的分片拓展首部中。&lt;/p&gt;
&lt;p&gt;• 把生存时间TTL字段改称为&lt;strong&gt;跳数限制字段&lt;/strong&gt;，这样名称与作用更加一致。&lt;/p&gt;
&lt;p&gt;• IPv6取消了协议字段，改用下一个首部字段。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;取消了首部检验和字段&lt;/strong&gt;，这样可以加快传输Pv6数据报的速度。&lt;/p&gt;
&lt;p&gt;• 取消了选项字段，改用扩展首部来实现选项功能。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;IPv6不允许中间路由分片，只允许源主机分片。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 中间路由器检测到过大数据报时，不会进行分片而是&lt;strong&gt;直接丢弃&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps58.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.基本首部各字段含义&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 版本：长4比特，用来表示IP协议的版本。&lt;/p&gt;
&lt;p&gt;• 通信量类字段：长8比特，用来&lt;strong&gt;区分不同的IPv6数据报的类比或优先级。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 流标号字段：长度为20比特&lt;/p&gt;
&lt;p&gt;￮ IPv6提出了流的抽象概念&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;“流”就是因特网上从特定源点到特定终点（单播或多播）的一系列IPv6数据报（如实时音视频数据的传送），而在这个“流”所经过的路径上的所有路由器都保证指明的服务质量。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 所有属于同一个流的IPv6数据报都具有同样的流标号。换句话说，&lt;strong&gt;流标号用于资源分配。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 有效载荷长度字段：长度为16比特，它&lt;strong&gt;指明IPv6数据报基本首部后面的有效载荷（包括拓展首部和数据部分）的字节数量。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ IPv6数据报基本首部后面的有效载荷的最大长度为65535字节。&lt;/p&gt;
&lt;p&gt;• 下一个首部字段：长度为8比特，该字段相当于IPv4数据报首部中的协&lt;strong&gt;议字段或可选字段。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;当IPv6数据报没有扩展首部时&lt;/strong&gt;，该字段的作用与IPv4的协议字段一样，它的值指出来IPv6数据报基本首部后面的数据是何种协议数据单元PDU。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;当IPv6数据报基本首部后面带有扩展首部时&lt;/strong&gt;，该字段的值就标识后面第一个扩展首部的类型。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps59.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 跳数限制字段：长度为8比特，该字段用来防止IPv6数据报在因特网中永久兜圈。&lt;/p&gt;
&lt;p&gt;• IPv6把原来IPv4首部中的&lt;strong&gt;选项字段都放在了扩展首部&lt;/strong&gt;中，由路径两端的源点和终点的主机来处理，而数据报传送路径中的所有路由器都不处理这些扩展首部。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;二十四、IPv6地址&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• IPv6地址为128比特，采用&lt;strong&gt;冒号十六进制&lt;/strong&gt;记法。&lt;/p&gt;
&lt;p&gt;• 使用**“左侧零”省略&lt;strong&gt;和&lt;/strong&gt;“连续零”压缩**，可使IPv6地址的表示更为简洁。&lt;/p&gt;
&lt;p&gt;￮ “左侧零”省略是指两个冒号之间的十六进制数中最前面的一串0可以省略不写。&lt;/p&gt;
&lt;p&gt;￮ “连续零”压缩是指一连串连续的0可以用一对冒号代替。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;在一个IPv6地址中&lt;strong&gt;&lt;strong&gt;只能使用一次&lt;/strong&gt;&lt;/strong&gt;“连续零”压缩&lt;/strong&gt;，否则会导致歧义。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;冒号十六进制记法还可结合点分十进制的后缀。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.IPv6地址的分类&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• IPv6数据报的目的地址有三种基本类型：单播、多播、任播。&lt;/p&gt;
&lt;p&gt;￮ IPv6没有采用广播的术语，而是将广播看作多播的一个特例。&lt;/p&gt;
&lt;p&gt;￮ 任播的&lt;strong&gt;终点是一组计算机，但数据报只交付其中的一个。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;未指明地址：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 128个比特为“全0”的地址，可缩写为两个冒号::&lt;/p&gt;
&lt;p&gt;￮ 该地址不能作为目的地址，只能用于还没有配置到一个标准IPv6地址的主机用作源地址。&lt;/p&gt;
&lt;p&gt;￮ 未指明地址只有一个。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;环回地址：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 最低比特为1，其余127个比特为“全0”，即0:0:0:0:0:0:0:1，可缩写为::1。&lt;/p&gt;
&lt;p&gt;￮ 该地址的作用与IPv4的环回地址相同。&lt;/p&gt;
&lt;p&gt;￮ IPv6的环回地址只有一个&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;多播地址：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 最高8比特为“全1”的地址，可记为FF00::/8。&lt;/p&gt;
&lt;p&gt;￮ IPv6多播地址的功能与IPv4多播地址相同。&lt;/p&gt;
&lt;p&gt;￮ 这类地址占IPv6地址空间的1/256.&lt;/p&gt;
&lt;p&gt;• 本地链路单播地址&lt;/p&gt;
&lt;p&gt;￮ 最高10比特为1111111010的地址，可记为FE80::/10。&lt;/p&gt;
&lt;p&gt;￮ 即使用户网络没有连接到因特网，但仍然可以使用TCPIP协议。连接在这种网络上的主机都可以使用本地链路单播地址进行通信，但不能和因特网上的其他主机通信。&lt;/p&gt;
&lt;p&gt;￮ 这类地址占IPv6地址空间的1/1024。&lt;/p&gt;
&lt;p&gt;• 全球单播地址&lt;/p&gt;
&lt;p&gt;￮ 全球单播地址是使用得最多的一类地址。&lt;/p&gt;
&lt;p&gt;￮ IPv6全球单播地址采用三级结构，这是为了使路由器可以更快地查找路由。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps60.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;二十五、从IPv4向IPv6过渡&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.双协议栈&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 双协议栈是指在完全过渡到IPv6之前，使一部分主机或路由器装有IPv4和IPv6两套协议栈。&lt;/p&gt;
&lt;p&gt;• 双协议栈主机或路由器既可以和IPv6系统通信，又可以和IPv4系统通信。&lt;/p&gt;
&lt;p&gt;• 双协议栈主机或路由器记为IPv6/IPv4，表明它具有一个IPv6地址和一个IPv4地址。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.隧道技术&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;当IPv6数据报要进入IPv4网络时，将IPv6数据报重新封装成IPv4数据报，即整个IPv6数据报成为IPv4数据报的数据载荷。&lt;/li&gt;
&lt;li&gt;封装有IPv6数据报的IPv4数据报在IPv4网络中传输:&lt;/li&gt;
&lt;li&gt;当IPv4数据报要离开IPv4网络时，再将其数据载荷(即原来的IPv6数据报)取出并转发到IPv6网络。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;二十六、网际控制报文协议ICMPv6&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 由于IPv6与IPv4一样，都不确保数据报的可靠交付，因此IPv6也需要使用网际控制报文协议ICMP来向发送IPv6数据报的源主机反馈一些差错信息，相应的ICMP版本为ICMPv6。&lt;/p&gt;
&lt;p&gt;• ICMPv6比ICMPv4要复杂得多，它&lt;strong&gt;合并了原来的地址解析协议ARP和网际组管理协议IGMP的功能&lt;/strong&gt;。因此与IPv6配套使用的网际层协议就只有ICMPv6这一个协议。&lt;/p&gt;
&lt;p&gt;• ICMPv6报文需要封装成IPv6数据报进行发送。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;二十七、软件定义网络SDN&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• SDN体系结构中，路由器之间不再交换路由信息。&lt;/p&gt;
&lt;p&gt;• 在控制层面中，有一个在&lt;strong&gt;逻辑上集中&lt;/strong&gt;的&lt;strong&gt;远程控制器&lt;/strong&gt;  。&lt;/p&gt;
&lt;p&gt;• 逻辑上集中的远程控制器&lt;strong&gt;在物理上可由不同地点的多个服务器组成。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 远程控制器掌握各主机和整个网络的状态。&lt;/p&gt;
&lt;p&gt;￮ 远程控制器能够为每一个分组计算出最佳的路由。&lt;/p&gt;
&lt;p&gt;￮ 远程控制器为每一个路由器生成其正确的转发表。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;路由器的仅需要进行查表转发&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;SDN核心思想：把网络的控制层面和数据层面分离，而让控制层面利用软件来控制数据层面中的许多设备。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• OpenFlow协议可被看成是SDN体系结构中&lt;strong&gt;控制层面与数据层面之间的通信接口。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• OpenFlow协议使得控制层面的控制器可以对数据层面中的物理设备进行直接访问和控制。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps61.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• SDN的&lt;strong&gt;广义转发&lt;/strong&gt;分为以下两个步骤:&lt;/p&gt;
&lt;p&gt;￮ 进行“&lt;strong&gt;匹配&lt;/strong&gt;”:能够对网络体系结构中&lt;strong&gt;各层(数据链路层、网络层、运输层)首部中的字段&lt;/strong&gt;进行匹配。&lt;/p&gt;
&lt;p&gt;￮ 执行**“动作”&lt;strong&gt;:不仅&lt;/strong&gt;转发分组**，还可以&lt;strong&gt;负载均衡、重写IP首部&lt;/strong&gt;(类似NAT路由器中的地址转换)、人为地&lt;strong&gt;阻挡或丢弃一些分组&lt;/strong&gt;(类似防火墙一样)。&lt;/p&gt;
&lt;p&gt;• 在SDN的广义转发中，完成“匹配+动作”的设备并不局限在网络层工作，因此不再称为路由器,而称为“&lt;strong&gt;OpenFlow交换机&lt;/strong&gt;”或“&lt;strong&gt;分组交换机&lt;/strong&gt;”，或更简单地称为“&lt;strong&gt;交换机&lt;/strong&gt;”。&lt;/p&gt;
&lt;p&gt;• 相应的，在SDN中&lt;strong&gt;取代传统路由器中转发表&lt;/strong&gt;的是“&lt;strong&gt;流表&lt;/strong&gt;(Flow Table)”&lt;/p&gt;
&lt;p&gt;￮ 一个流就是穿过网络的一种&lt;strong&gt;分组序列&lt;/strong&gt;，而在此序列中的每个分组都&lt;strong&gt;共享分组首部某些字段的值&lt;/strong&gt;。例如，某个流可以是具有相同源IP地址和目的IP地址的一连串分组。&lt;/p&gt;
&lt;p&gt;￮ OpenFlow交换机中的&lt;strong&gt;流表是由SDN远程控制器来管理的&lt;/strong&gt;。SDN远程控制器通过一个安全信道，使用0penFlow协议来管理0penFlow交换机中的流表。&lt;/p&gt;
&lt;p&gt;• 每个OpenFlow交换机必须有&lt;strong&gt;一个或多个流表。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 每一个流表可以包含&lt;strong&gt;多个流表项&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 每个流表项包含三个字段:&lt;strong&gt;首部字段值(或称匹配字段)、计数器、动作&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;首部字段值&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;▪ &lt;strong&gt;首部字段值&lt;/strong&gt;字段包含有一组字段，用来使入分组(IincomingPacket)的对应首部与之匹配大此又称为&lt;strong&gt;匹配字段&lt;/strong&gt;。匹配不上的分组就被丢弃，或被发送到SDN远程控制器做更多的处理。&lt;/p&gt;
&lt;p&gt;▪ 在OpenFlow交换机中，既可以处理&lt;strong&gt;数据链路层的帧&lt;/strong&gt;，也可以处理&lt;strong&gt;网际层的IP数据报&lt;/strong&gt;，还可以处理&lt;strong&gt;运输层的TCP或UDP报文。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;计数器&lt;/strong&gt;：&lt;/p&gt;
&lt;p&gt;▪ 记录已经与该流表项匹配的分组数量的计数器;&lt;/p&gt;
&lt;p&gt;▪ 记录该流表项上次更新到现在经历时间的计数器。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;动作&lt;/strong&gt;字段是一组动作，当分组匹配某个流表项时，执行该流表项中动作字段指明的以下某个或多个动作:&lt;/p&gt;
&lt;p&gt;▪ 把分组转发到指明的端口&lt;/p&gt;
&lt;p&gt;▪ 丢弃分组&lt;/p&gt;
&lt;p&gt;▪ 把分组进行复制后再从多个端口转发出去&lt;/p&gt;
&lt;p&gt;▪ 重写分组的首部字段(包括数据链路层、网际层以及运输层的首部)&lt;/p&gt;
&lt;p&gt;SDN体系结构及其四个关键特征1. 基于流的转发2. 数据层面与控制层面分离3. 位于数据层面分类交换机之外的网络控制功能4. 可编程的网络&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;第五章 运输层&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;一、进程间基于网络的通信&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 如何&lt;strong&gt;为运行在不同主机上的应用进程提供直接的逻辑通信服务&lt;/strong&gt;，就是运输层的主要任务。运输层协议也称为&lt;strong&gt;端到端协议&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 使用&lt;strong&gt;端口号&lt;/strong&gt;实现进程间通信。&lt;/p&gt;
&lt;p&gt;• 端口并不是指物理端口，而是用来区分不同应用进程的标识符。&lt;/p&gt;
&lt;p&gt;• 运输层向应用层实体屏闭了下面网络核心的细节（如网络拓扑、所采用的路由选择协议等），它使应用进程看见的就&lt;strong&gt;好像是在两个运输层实体之间有一条端到端的逻辑通信信道&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;二、TCP/IP体系结构运输层中的两个重要协议&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps62.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• TCP提供&lt;strong&gt;可靠&lt;/strong&gt;传输服务，UDP提供&lt;strong&gt;不可靠&lt;/strong&gt;传输服务。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.TCP协议&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 传输控制协议（Transmission Control Protocol,TCP）为其上层提供的是&lt;strong&gt;面向连接&lt;/strong&gt;的&lt;strong&gt;可靠&lt;/strong&gt;的数据传输服务。&lt;/p&gt;
&lt;p&gt;• 使用TCP通信的双方，在传输数据之前&lt;strong&gt;必须首先建立TCP连接&lt;/strong&gt;（逻辑链接）。数据传输结束后&lt;strong&gt;必须要释放TCP连接&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• TCP为了实现可靠传输，就必须使用很多措施，例如&lt;strong&gt;TCP连接管理、确认机制、超时重传、流量控制&lt;/strong&gt;以及&lt;strong&gt;拥塞控制&lt;/strong&gt;等。&lt;/p&gt;
&lt;p&gt;• TCP的&lt;strong&gt;实现复杂&lt;/strong&gt;，TCP报文段的&lt;strong&gt;首部比较大&lt;/strong&gt;，&lt;strong&gt;占用处理机资源比较多&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.UDP协议&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 用户数据报协议(User DatagramProtocol，UDP)为其上层提供的是&lt;strong&gt;无连接&lt;/strong&gt;的&lt;strong&gt;不可靠&lt;/strong&gt;的数据传输服务。&lt;/p&gt;
&lt;p&gt;• 使用UDP通信的双方，在传送数据之前&lt;strong&gt;不需要建立连接&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• UDP不需要实现可靠传输，因此&lt;strong&gt;不需要使用实现可靠传输的各种机制&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• UDP的&lt;strong&gt;实现简单&lt;/strong&gt;，UDP用户数据报的&lt;strong&gt;首部比较小&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;三、运输层端口号、复用与分用的概念&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.运输层端口号&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• TCPIP体系结构的运输层使用&lt;strong&gt;端口号&lt;/strong&gt;来标识和区分应用层的不同应用进程。端口号的&lt;strong&gt;长度为16比特&lt;/strong&gt;，&lt;strong&gt;取值范围是0~65535&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps63.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.发送方的复用和接收方的分用&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps64.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps65.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;四、UDP和TCP的对比&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.无连接的UDP和面向连接的TCP&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps66.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.UDP和TCP对单播、多播和广播的支持情况&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps67.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.UDP和TCP对应用层报文的处理&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps68.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4.UDP和TCP对数据传输可靠性的支持情况&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps69.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;5.UDP首部和TCP首部的对比&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps70.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;6.UDP和TCP总结&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;用户数据协议UDP&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;传输控制协议TCP&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;无连接&lt;/td&gt;
          &lt;td&gt;面向连接&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;支持“一对一”、“一对多”、“多对一”和“多对多”交互通信。&lt;/td&gt;
          &lt;td&gt;每一条TCP连接只能由两个断点EP，只能是一对一通信&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;面向应用报文&lt;/td&gt;
          &lt;td&gt;面向字节流&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;尽最大努力交付，即不可靠；不适用流量控制和拥塞控制&lt;/td&gt;
          &lt;td&gt;可靠传输，使用流量控制和拥塞控制。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;首部开销小，仅8字节。&lt;/td&gt;
          &lt;td&gt;首部最小20字节，最大60字节。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;四、UDP数据报&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps71.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;UDP协议支持报文拆分、重装&lt;/strong&gt;，因此应用层的报文长度不能超过UDP协议上限。&lt;/p&gt;
&lt;p&gt;• UDP首部很小，仅占&lt;strong&gt;8B&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• UDP提供了&lt;strong&gt;差错检验&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps72.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;五、UDP检验（非必须）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps73.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 检验和计算：&lt;/p&gt;
&lt;p&gt;￮ 传输层的UDP协议在计算校验和之前，先&lt;strong&gt;添加12B伪首部&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 把&lt;strong&gt;伪首部、首部、数据部分&lt;/strong&gt;以16bit为一组，进行二进制加法（最高位产生的进位需要&lt;strong&gt;回卷&lt;/strong&gt;）&lt;/p&gt;
&lt;p&gt;￮ 将最终的加法结果逐位取反，就得到16bit校验和，将其填入UDP首部。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;去掉伪首部&lt;/strong&gt;，并将UDP数据报交给网络层，封装成IP数据报。&lt;/p&gt;
&lt;p&gt;• 差错检验方法：&lt;/p&gt;
&lt;p&gt;￮ 接收方将收到的内容,&lt;strong&gt;添加伪首部&lt;/strong&gt;，再以16bit为一组，进行二进制加法。&lt;/p&gt;
&lt;p&gt;￮ 如果结果为&lt;strong&gt;全1&lt;/strong&gt;，说明&lt;strong&gt;无差错&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 如果结果&lt;strong&gt;不是全1&lt;/strong&gt;，说明&lt;strong&gt;有差错&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 此处的校验和方法与IPv4的校验和方法完全一致，只是IPv4不对数据部分进行校验。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;六、TCP框架梳理&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• TCP协议的三大阶段&lt;/p&gt;
&lt;p&gt;￮ 建立连接（三次握手）&lt;/p&gt;
&lt;p&gt;￮ 数据传输&lt;/p&gt;
&lt;p&gt;￮ 释放连接（四次挥手）&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps74.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;握手的发起方必须是客户端&lt;/strong&gt;，挥手的发起方客户端和服务器&lt;strong&gt;均可以&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;七、TCP报文段的首部格式&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps75.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;序号（seq）&lt;/strong&gt;：占32比特，取值范围0~2^(32)-1。当序号增加到最后一个时，下一个序号又回到0。&lt;strong&gt;用来指出本TCP报文段数据载荷的第一个字节的序号&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 每个字节对应一个序号。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;确认号（ack）&lt;/strong&gt;：占32比特，取值范围0~232-1。当确认号增加到最后一个时，下一个确认号又回到0。&lt;strong&gt;用来指出&lt;strong&gt;&lt;strong&gt;期望&lt;/strong&gt;&lt;/strong&gt;收到对方下个TCP报文段的数据载荷的&lt;strong&gt;&lt;strong&gt;第一个字节的序号&lt;/strong&gt;&lt;/strong&gt;，同时也是对之前收到的所有数据的确认&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;ack号为收到的seq号+1&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;确认标志位ACK&lt;/strong&gt;：&lt;strong&gt;有当ACK取值为1时，确认号字段才有效&lt;/strong&gt;。ACK取值为0时，确认号字段无效。TCP规定:&lt;strong&gt;在TCP连接建立后，所有传送的TCP报文段都必须把ACK置1。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;握手1的ACK=0，其他TCP报文段ACK均为1。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps76.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;数据偏移&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 占4比特，该字段的取值以4字节为单位。&lt;/p&gt;
&lt;p&gt;￮ 指出TCP报文段的数据载荷部分的起始处距离TCP报文段的起始处有多远，这实际上指出了&lt;strong&gt;TCP报文段的首部长度&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ TCP报文段&lt;strong&gt;没有指出TCP报文段的总长度&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 保留：&lt;/p&gt;
&lt;p&gt;￮ 占6比特&lt;/p&gt;
&lt;p&gt;￮ 保留为今后使用&lt;/p&gt;
&lt;p&gt;￮ 目前应置为0&lt;/p&gt;
&lt;p&gt;• 标志位：&lt;/p&gt;
&lt;p&gt;￮ 紧急位URG：1bit，URG=1时，紧急指针有效。表示这是紧急数据，应尽快插队发送。&lt;/p&gt;
&lt;p&gt;￮ 推送位PSH：1bit，PSH=1时表示希望接收方尽快回复(用于交互式通信)。&lt;/p&gt;
&lt;p&gt;￮ 复位位RST：1bit，RST=1时，表示出现严重差错(如主机崩溃)，必须释放连接。也可用于拒绝一个非法报文段(如恶意的黑客攻击)。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;同步位SYN&lt;/strong&gt;：1bit，当 SYN =1 时表示这是&lt;strong&gt;一个连接请求或连接接受报文&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;▪ &lt;strong&gt;只有握手1、握手2的SYN=1，其他所有TCP报文段都是SYN=0。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;终止位FIN&lt;/strong&gt;：1bit，当 FIN=1 时，表明此报文段的发送方的数据&lt;strong&gt;已发送完毕，要求释放传输连接。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;▪ &lt;strong&gt;只有挥手1、挥手3的FIN=1，其他所有TCP报文段都是FIN=0。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 若SYN=1,可称为SYN段。&lt;/p&gt;
&lt;p&gt;￮ 若FIN=1，可称为FIN段。&lt;/p&gt;
&lt;p&gt;￮ 若ACK=1，可称为ACK段。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;窗口（rwnd或rcvwnd）&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;￮ 占16比特，该字段的取值&lt;strong&gt;以字节为单位&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;￮ 指出发送本报文段的一方的&lt;strong&gt;接收窗口的大小&lt;/strong&gt;，即接收缓存的可用空间大小，这用来表征接收方的&lt;strong&gt;接收能力。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 在计算机网络中，经常&lt;strong&gt;用接收方的接收能力的大小来控制发送方的数据发送量&lt;/strong&gt;，这就是所谓的&lt;strong&gt;流量控制****。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;检验和&lt;/strong&gt;：&lt;/p&gt;
&lt;p&gt;￮ 占16比特&lt;/p&gt;
&lt;p&gt;￮ 用来&lt;strong&gt;检查&lt;strong&gt;&lt;strong&gt;整个TCP报文段&lt;/strong&gt;&lt;/strong&gt;在传输过程中是否出现了误码。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 在计算检验和时，要在TCP报文段前面加上12字节的&lt;strong&gt;伪首部&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps77.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;选项字段&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;￮ 建立TCP连接时，在握手1、握手2选项中&lt;strong&gt;协商MMS****（最大段长）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ MSS的值表示&lt;strong&gt;数据载荷长度&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 通常MSS不会设置太大，一面在IP层被分片。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;八、TCP连接管理——建立连接&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.建立连接（三次握手）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps78.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;握手1、握手2不能携带数据，但是仍要消耗序号&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 握手1的起始序号由用户进程自己决定。&lt;/p&gt;
&lt;p&gt;￮ 握手2的起始序号由服务进程自己决定。&lt;/p&gt;
&lt;p&gt;• 握手1、握手2不能携带数据，握手3可以携带数据。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;握手3****如果不携带数据就不消耗序号&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 只有握手3可以不消耗序号。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.建立连接TCP状态转换&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps79.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.建立阶段耗时分析&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 从发出握手1，到客户端进程可以发送数据，至少需要多久？——&lt;strong&gt;1RTT&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 从发出握手1，到服务器进程可以发送数据，至少需要多久？——&lt;strong&gt;1.5RTT&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;九、TCP连接管理——释放连接&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.释放连接（四次挥手）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps80.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 挥手表示“&lt;strong&gt;我不会再继续发送数据&lt;/strong&gt;”。&lt;/p&gt;
&lt;p&gt;• 只有挥手1、挥手3的FIN=1。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;挥手1、挥手3即便不携带数据，也要消耗一个序号。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 挥手2&lt;strong&gt;可以携带数据&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 挥手4&lt;strong&gt;不可以携带数据&lt;/strong&gt;。（因为通道已经关闭）&lt;/p&gt;
&lt;p&gt;• 先提出挥手的一端，在进行两次挥手之后，&lt;strong&gt;单向的通道关闭&lt;/strong&gt;，对方仍然可以发送数据。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.释放连接TCP状态转换&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps81.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.释放阶段耗时分析&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• MSL（Maximum Segment Lifetime，最长报文段寿命），是由TCP协议规定的一个固定时间长度。&lt;/p&gt;
&lt;p&gt;• 在等待期间重复收到挥手3，则重置计时器。&lt;/p&gt;
&lt;p&gt;• 如果服务器在收到挥手1时，已经没有待传送数据，那么可以连续发出挥手2挥手3。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps82.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;十、TCP可靠传输、流量控制&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.流量控制&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 流量控制：接收方根据自己的接受能力（&lt;strong&gt;接收窗口&lt;/strong&gt;）&lt;strong&gt;控制发送方&lt;/strong&gt;的发送速率&lt;/p&gt;
&lt;p&gt;• 接收方维持一个接收窗口：&lt;/p&gt;
&lt;p&gt;￮ 接收窗口不能大于接收缓冲区大小&lt;/p&gt;
&lt;p&gt;￮ 接受窗口“框住”的是接收方还允许接收的序号范围&lt;/p&gt;
&lt;p&gt;￮ 接收窗口需要与ack配合使用！&lt;strong&gt;接收窗口并不是指接收缓冲区的剩余容量！！&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 发送方维持一个发送窗口：&lt;/p&gt;
&lt;p&gt;￮ 发送窗口不能大于发送缓冲区大小&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;发送窗口不能大于接收窗口的大小&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 发送窗口“框住”的是发送缓冲区中，已发送但&lt;strong&gt;尚未收到确认&lt;/strong&gt;的数据，以及可以发送但&lt;strong&gt;尚未发送的数据&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;发送窗口上限 = min{接收窗口，拥塞窗口}&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 为了打破由于&lt;strong&gt;非零窗口通知报文段丢失而引起的死锁&lt;/strong&gt;，TCP为每一个连接都设有一个持续计时器&lt;/p&gt;
&lt;p&gt;￮ 只要TCP连接的一方收到对方的零窗口通知，就启动持续计时器。&lt;/p&gt;
&lt;p&gt;￮ 当持续计时器超时时，就发送一个零窗口探测报文段，仅携带1字节数据。&lt;/p&gt;
&lt;p&gt;￮ 对方在确认这个零窗口探测报文段时，给出自己现在的接收窗口值。&lt;/p&gt;
&lt;p&gt;￮ 如果接收窗口值仍然是0，那么收到这个报文段的一方就重新启动持续计时器。&lt;/p&gt;
&lt;p&gt;￮ 如果接收窗口值不是0，那么死锁的局面就可以被打破了。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.超时重传、推迟确认&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 累计确认：如果收到ack_seq=n,说明序号n之前的所有字节都已正确接收。&lt;/p&gt;
&lt;p&gt;• 推迟确认：&lt;/p&gt;
&lt;p&gt;￮ 推迟时间最多不能超过0.5s&lt;/p&gt;
&lt;p&gt;￮ 如果字节也有数据要传送给对方，立即返回ACK值，并“捎带”自己的数据&lt;/p&gt;
&lt;p&gt;￮ 若连续收到两个长度为MSS的报文段，就应该立即返回ACK段。（因为报文段长度长，如果要重传的话，代价大）&lt;/p&gt;
&lt;p&gt;• 捎带确认：服务器刚好有数据要发送，就立刻返回ACK段，并捎带数据。&lt;/p&gt;
&lt;p&gt;• 缓冲区未满，也可以&lt;strong&gt;按序&lt;/strong&gt;交付应用层。&lt;/p&gt;
&lt;p&gt;• 每发出一个报文段，就设置&lt;strong&gt;超时重传计时器&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 若规定时间内没有收到ack，则进行超时重传。&lt;/p&gt;
&lt;p&gt;• 超时重传机制中，如果采用了累计确认，会导致重复发送已接收的报文段，为了解决该问题，引入了快重传。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps83.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4.快重传、立即确认&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 立即确认：没说到一个报文段就立即确认，即使是失序报文段，也要立即返回ACK&lt;/p&gt;
&lt;p&gt;• 快重传：如果发现发送方收到三个&lt;strong&gt;确认号相同的冗余ACK&lt;/strong&gt;，就&lt;strong&gt;立即&lt;/strong&gt;重发对应的报文段。&lt;/p&gt;
&lt;p&gt;￮ 注意，下图中&lt;strong&gt;第一个ACK并不是冗余ACK&lt;/strong&gt;！&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps84.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;十一、TCP拥塞控制&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.TCP拥塞控制、TCP流量控制的区别与联系&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 流量控制：控制&lt;strong&gt;端到端&lt;/strong&gt;的数据发送量，是“&lt;strong&gt;局部的&lt;/strong&gt;”&lt;/p&gt;
&lt;p&gt;• 拥塞控制：控制&lt;strong&gt;整个网络&lt;/strong&gt;中每台主机的数据发送量，负责路由器负载，是“&lt;strong&gt;全局的&lt;/strong&gt;”&lt;/p&gt;
&lt;p&gt;• 如何判断网络拥塞：&lt;/p&gt;
&lt;p&gt;￮ 发出的每个报文段，都能顺利的收到ACK确认——&lt;strong&gt;不拥塞&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 发出的报文段未能按时收到ACK，引发&lt;strong&gt;超时重传&lt;/strong&gt;——&lt;strong&gt;严重拥塞&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 收到冗余ACK，引发&lt;strong&gt;快重传&lt;/strong&gt;——&lt;strong&gt;有点拥塞&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 检测到网络拥塞后采取的措施:&lt;/p&gt;
&lt;p&gt;￮ 迅速减少发送的数据量&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;严重拥塞&lt;/strong&gt;就&lt;strong&gt;迅速缩小&lt;/strong&gt;拥塞窗口&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;有点拥塞&lt;/strong&gt;就&lt;strong&gt;适当缩小&lt;/strong&gt;拥塞窗口&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.慢开始、拥塞避免&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps85.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;发送窗口上限 = min{接收窗口rwnd，拥塞窗口cwnd}&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 拥塞窗口大多为MMS的倍数。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;慢开始算法&lt;/strong&gt;：cwnd的值从1开始，cwnd&lt;strong&gt;每收到一个ACK，就让cwnd+1&lt;/strong&gt;（当&lt;strong&gt;cwnd&amp;lt;ssthress&lt;/strong&gt;时适用）&lt;/p&gt;
&lt;p&gt;￮ 慢开始算法&lt;strong&gt;每隔一个RTT&lt;/strong&gt;，拥塞窗口&lt;strong&gt;大小翻倍&lt;/strong&gt;，直到达到阈值。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;拥塞避免算法&lt;/strong&gt;：在一个RTT内，&lt;strong&gt;即使收到多个ACK，也只能让cwnd+1&lt;/strong&gt;(当&lt;strong&gt;cwnd≥ssthress&lt;/strong&gt;时适用)&lt;/p&gt;
&lt;p&gt;• 在发生&lt;strong&gt;超时重传&lt;/strong&gt;的时候，会立即调整拥塞窗口cwnd的值为1（&lt;strong&gt;重启慢开始算法&lt;/strong&gt;），并且&lt;strong&gt;重置阈值为原拥塞窗口的一半****。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.快重传、快恢复&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps86.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 快重传：但发送方收到三个确认号相同的冗余ACK时，立即重传对应报文段。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;快恢复算法&lt;/strong&gt;：一旦发生&lt;strong&gt;快重传&lt;/strong&gt;，就&lt;strong&gt;将****阈值、拥塞窗口cwnd都设置为cwnd的一半&lt;/strong&gt;，然后&lt;strong&gt;立即切换到为“拥塞避免算法”&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 简单来说就是&lt;strong&gt;将拥塞窗口cwnd设置为原值的一半&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;阈值不能小于2。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;第六章 应用层&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;一、客户/服务器方式（C/S方式）和对等方式（P2P方式）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.客户/服务器方式&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 客户和服务器是指通信中所涉及的两个应用程序。&lt;/p&gt;
&lt;p&gt;• 客户是服务的请求方，服务器是服务的提供方。&lt;/p&gt;
&lt;p&gt;• 服务器总是处于运行状态，并等待客户的服务请求。服务器具有固定端口号(例如HTTP服务器的默认端口号为80)，而运行服务器的主机也具有固定的IP地址。&lt;/p&gt;
&lt;p&gt;• 在C/S应用中，常用计算机群集（或服务器场）构建一个强大的&lt;strong&gt;虚拟服务器&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.对等方式&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 在P2P方式中，&lt;strong&gt;没有固定的服务请求者和服务提供者&lt;/strong&gt;，分布在网络边缘各端系统中的应用进程是对等的，被称为&lt;strong&gt;对等方&lt;/strong&gt;。&lt;strong&gt;对等方相互之间直接通信&lt;/strong&gt;，每个对等方既是服务的请求者，又是服务的提供者。&lt;/p&gt;
&lt;p&gt;• 基于P2P的应用是&lt;strong&gt;服务分散型&lt;/strong&gt;的，因为服务不是集中在少数几个服务器计算机中，而是分散在大量对等计算机中。&lt;/p&gt;
&lt;p&gt;• P2P有&lt;strong&gt;可拓展性&lt;/strong&gt;，系统性能不会因规模的增大而降低。&lt;/p&gt;
&lt;p&gt;• P2P具有成本上的优势。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;二、动态主机配置协议DHCP&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• DHCP会给刚接入网络的主机&lt;strong&gt;动态分配IP地址、配置默认网关、子网掩码&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps87.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.DHCP过程&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps88.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;DISCOVER——发现报文&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps89.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;OFFER——提供报文&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps90.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;REQUEST——请求报文&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps91.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;ACKNOWLEDGE——确认报文&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps92.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.DHCP总结&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• DHCP是应用层协议协议，基于UDP&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;客户UDP端口号=68、服务器UDP=67&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;客户 -&amp;gt; 服务器：DHCP发现报文&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;￮ 携带信息:客户主机的MAC地址(还可以提出对IP地址租用期的要求)&lt;/p&gt;
&lt;p&gt;￮ 网络层:&lt;strong&gt;源IP地址=0.0.0.0，目的IP地址=255.255.255.255(广播IP数据报)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 链路层:源MAC=客户的MAC地址，目的MAC=全1**(广播帧)**&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;服务器 -&amp;gt; 客户：DHCP提供报文&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;￮ 携带信息:给客户分配的IP 地址、&lt;strong&gt;租用期&lt;/strong&gt;、子网掩码、默认网关&lt;/p&gt;
&lt;p&gt;￮ 网络层:&lt;strong&gt;源IP=DHCP服务器的IP地址，目的IP=255.255.255.255(广播IP数据报）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 链路层:源MAC=服务器的MAC地址，目的MAC=客户的MAC地址**(单播帧)**&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;客户 -&amp;gt; 服务器：DHCP请求报文&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;￮ 携带信息:客户机确认要使用的IP地址&lt;/p&gt;
&lt;p&gt;￮ 网络层:&lt;strong&gt;源IP=0.0.0.0，目的IP=255.255.255.255(广播IP数据报)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 链路层:源MAC=客户的MAC地址，目的MAC=全1**(广播帧)**&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;服务器 -&amp;gt; 客户：DHCP确认报文&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;￮ 携带信息:与报文②类似&lt;/p&gt;
&lt;p&gt;￮ 网络层:&lt;strong&gt;源IP=DHCP服务器的IP地址，目的IP=255.255.255.255(广播IP数据报）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 链路层:源MAC=服务器的MAC地址，目的MAC=客户的MAC地址**(单播帧)**&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;三、域名系统DNS&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 因特网采用&lt;strong&gt;层次树状结构的域名结构&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 域名系统（DNS）组成：&lt;strong&gt;域名空间、域名服务器和分布式数据库&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;IP地址与域名并不一一对应。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 域名的结构由若干个分量组成，各分量之间用“点”隔开，分别代表不同级别的域名。&lt;/p&gt;
&lt;p&gt;￮ 每一级的域名都由英文字母和数字组成，不超过63个字符，不区分大小写。&lt;/p&gt;
&lt;p&gt;￮ 字母级别最低的域名写在最左边，而级别最高的顶级域名写在最右边。&lt;/p&gt;
&lt;p&gt;￮ 完整的域名不超过255个字符。&lt;/p&gt;
&lt;p&gt;• 顶级域名TLD分为以下三类:&lt;/p&gt;
&lt;p&gt;￮ 国家顶级域名nTLD：采用ISO 3166的规定。如cn表示中国，us表示美国，uk表示英国、等等。&lt;/p&gt;
&lt;p&gt;￮ 通用顶级域名gTLD：最常见的通用顶级域名有七个，即:com(公司企业)、net(网络服务机构)、org(非营利性组织)、int(国际组织)、edu(美国教育结构)、gov(美国政府部门)、mil(美国军事部门)&lt;/p&gt;
&lt;p&gt;￮ 反向域arpa：用于反向域名解析，即IP地址反向解析为域名。&lt;/p&gt;
&lt;p&gt;• 在国家顶级域名下注册的二级域名均由该国家自行确定。&lt;/p&gt;
&lt;p&gt;• 我国将&lt;strong&gt;二级域名&lt;/strong&gt;划分为以下两类：&lt;/p&gt;
&lt;p&gt;￮ 类别域名：共七个:ac(科研机构)、com(工、商、金融等企业)、edu(教育机构)gov(政府部门)、net(提供网络服务的机构)、mil(军事机构)和org(非营利性组织)。&lt;/p&gt;
&lt;p&gt;￮ 行政区域名：共34个，适用于我国的各省、自治区、直辖市。例如:bj为北京市、sh为上海市js为江苏省，等等。&lt;/p&gt;
&lt;p&gt;• 域名和IP地址的映射关系必须保存在域名服务器中，供所有其他应用查询。显然不能将所有信息都储存在一台域名服务器中。DNS使用&lt;strong&gt;分布在各地的域名服务器&lt;/strong&gt;来实现域名到IP地址的转换。&lt;/p&gt;
&lt;p&gt;• 主机上请求域名解析的软件&lt;strong&gt;只需要知道本地域名服务器的IP&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 域名服务器可以划分为以下四种不同类型：&lt;/p&gt;
&lt;p&gt;￮ 根域名服务器：&lt;/p&gt;
&lt;p&gt;▪ 因特网上共有13个不同ip地址的根域名服务器，实际上是由许多分布在世界各地的计算机构成的&lt;strong&gt;服务器群集&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;▪ 根域名服务器通常并不直接对域名进行解析，而是返回该域名所属顶级域名的&lt;strong&gt;顶级域名服务器的IP地址。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 顶级域名服务器：&lt;/p&gt;
&lt;p&gt;▪ 这些域名服务器负责管理在该顶级域名服务器注册的所有二级域名。&lt;/p&gt;
&lt;p&gt;▪ 当收到DNS查询请求时，就给出相应回答（可能是最后结果，也可能时下一级权限域名服务器的IP地址）&lt;/p&gt;
&lt;p&gt;￮ 权限域名服务器：&lt;/p&gt;
&lt;p&gt;▪ 这些域名服务器负责管理某个区的域名。每一个主机的域名都必须在某个权限域名服务器处注册登记。&lt;/p&gt;
&lt;p&gt;▪ 因此权限域名服务器&lt;strong&gt;知道其管辖的域名与IP地址的映射关系&lt;/strong&gt;。另外，权限域名服务器还知道其下级域名服务器的地址。&lt;/p&gt;
&lt;p&gt;￮ 本地域名服务器：&lt;/p&gt;
&lt;p&gt;▪ 本地域名服务器不属于上述的域名服务器的等级结构。&lt;/p&gt;
&lt;p&gt;▪ 本地域名服务器起着&lt;strong&gt;代理的作用&lt;/strong&gt;，会将该报文转发到上述的域名服务器的等级结构中。&lt;/p&gt;
&lt;p&gt;▪ 本地域名服务器中有某域名的DNS信息时，&lt;strong&gt;无需查询其他任何服务器&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.域名解析过程&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps93.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 由于递归查询对于被查询的域名服务器负担太大，通常采用以下模式：从请求主机到本地域名服务器的查询是递归查询，而其余的查询是迭代查询。&lt;/p&gt;
&lt;p&gt;• 为了减轻根域名服务器的负担和减少因特网上的DNS查询报文数量，在域名服务器中广泛使用了&lt;strong&gt;高速缓存&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 为了保证高速缓存中的内容正确，域名服务器应为每项内容&lt;strong&gt;设置计时器并删除超过合理时间的项。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;四、文件传送协议FTP&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• FTP提供&lt;strong&gt;交互式的访问&lt;/strong&gt;，允许客户&lt;strong&gt;指明文件的类型与格式&lt;/strong&gt;(如指明是否使用ASCII码)，并允许&lt;strong&gt;文件具有存取权限&lt;/strong&gt;(如访问文件的用户必须经过授权，并输入有效的口令)。&lt;/p&gt;
&lt;p&gt;• 一个FTP服务器进程可以同时为多个客户进程提供服务。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;FTP屏蔽了各计算机系统的细节，因而适合于在异构网络中任意计算机之间传送文件。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps94.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 控制连接在整个会话期间&lt;strong&gt;保持打开状态&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 数据连接在每次&lt;strong&gt;数据传输完毕后就关闭&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• FTP使用&lt;strong&gt;TCP21端口进行控制连接&lt;/strong&gt;，用&lt;strong&gt;TCP20端口进行数据连接&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;￮ 注意&lt;strong&gt;这是FTP服务器的端口号&lt;/strong&gt;，客户的端口号由客户进程自己提供。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;五、电子邮件&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 电子邮件系统采用&lt;strong&gt;客户/服务器方式&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;• 电子邮件系统的三个主要组成构件**:用户代理，邮件服务器**，以及电&lt;strong&gt;子邮件所需的协议。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 用户代理是用户与电子邮件系统的接口，又称为电子邮件客户端软件。&lt;/p&gt;
&lt;p&gt;￮ 邮件服务器是电子邮件系统的基础设施。因特网上所有的ISP都有邮件服务器，其功能是发送和接收邮件，同时还要负责维护用户的邮箱。&lt;/p&gt;
&lt;p&gt;￮ 协议包括邮件发送协议(例如SMTP)和邮件读取协议(例如POP3，IMAP)&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps95.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.SMTP基本工作原理&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps96.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.邮件格式&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 一个电子邮件由&lt;strong&gt;信封&lt;/strong&gt;和&lt;strong&gt;内容&lt;/strong&gt;两个部分。而内容又由&lt;strong&gt;首部&lt;/strong&gt;和&lt;strong&gt;主体&lt;/strong&gt;两部分构成。&lt;/p&gt;
&lt;p&gt;• SMTP协议是用于&lt;strong&gt;邮件发送&lt;/strong&gt;的协议。&lt;/p&gt;
&lt;p&gt;• SMTP协议&lt;strong&gt;只能传送ASCII码文本数据&lt;/strong&gt;，不能传送可执行文件或其他的二进制对象。&lt;/p&gt;
&lt;p&gt;• 电子邮件的地址格式：收件人&lt;strong&gt;邮箱名&lt;/strong&gt;@邮箱所在主机的&lt;strong&gt;域名&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ 如abc@123.com，其中abc在123.com这个邮件服务器上必须是唯一的。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps97.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 为解决SMTP传送非ASCII码 文本的问题，提出了多用途因特网邮件扩展MIME。&lt;/p&gt;
&lt;p&gt;￮ 增加了&lt;strong&gt;5个新的邮件首部字段&lt;/strong&gt;，这些字段提供了有关邮件主体的信息。&lt;/p&gt;
&lt;p&gt;￮ 定义了&lt;strong&gt;许多邮件内容的格式&lt;/strong&gt;，对多媒体电子邮件的表示方法进行了标准化。&lt;/p&gt;
&lt;p&gt;￮ 定义了&lt;strong&gt;传送编码&lt;/strong&gt;，可对任何内容格式进行转换，而不会被邮件系统改变。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps98.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.邮件读取协议&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;邮件协议POP：&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;￮ 非常简单、功能有限的邮件读取协议。用户只能以&lt;strong&gt;下载并删除方式&lt;/strong&gt;或下&lt;strong&gt;载并保留方式&lt;/strong&gt;从邮件服务器下载邮件到用户方计算机。&lt;strong&gt;不允许用户在邮件服务器上管理自己的邮件&lt;/strong&gt;。(例如创建文件夹，对邮件进行分类管理等)&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;因特网邮件访问协议IMAP：&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;￮ 功能比POP3强大的邮件读取协议。&lt;strong&gt;用户在自己的计算机上就可以操控邮件服务器中的邮箱。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• POP3和IMAP4都采用&lt;strong&gt;基于TCP连接的客户/服务器方式&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4.基于万维网的电子邮件&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 通过&lt;strong&gt;浏览器&lt;/strong&gt;登录(提供用户名和口令)&lt;strong&gt;邮件服务器万维网网站&lt;/strong&gt;就可以撰写、收发、阅读和管理电子邮件。这种工作模式与IMAP很类似，不同的是用户计算机无需安装专门的用户代理程序，只需要使用通用的万维网浏览器。&lt;/p&gt;
&lt;p&gt;• 邮件服务器网站通常都提供非常强大和方便的邮件管理功能，用户可以在邮件服务器网站上管理和处理自己的邮件，而不需要将邮件下载到本地进行管理。&lt;/p&gt;
&lt;p&gt;• 基于万维网的电子邮件中，用户浏览器与邮件服务器之间的邮件发送或接收&lt;strong&gt;使用的是HTTP&lt;/strong&gt;，&lt;strong&gt;只有在不同邮件服务器之间传送邮件时才使用SMTP。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps99.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;六、万维网&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 万维网WWW (Word Wide Web)&lt;strong&gt;并非某种特殊的计算机网络&lt;/strong&gt;。它是一个大规模的、联机式的信息储藏所&lt;strong&gt;是运行在因特网上的一个分布式应用。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 万维网利用网页之间的&lt;strong&gt;超链接&lt;/strong&gt;将不同网站的网页链接成一张逻辑上的信息网。&lt;/p&gt;
&lt;p&gt;• 为了方便地访问在世界范围的文档，万维网使用&lt;strong&gt;统一资源定位符URL&lt;/strong&gt;来指明因特网上任何种类“资源”的位置，&lt;strong&gt;每个文档在万维网范围内有唯一URL标识符。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• URL的一般形式由以下四个部分组成:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps100.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• 万维网的文档：&lt;/p&gt;
&lt;p&gt;￮ 超文本标记语言HTML：使用多种“标签”来描述网页的结构和内容。&lt;/p&gt;
&lt;p&gt;￮ 层叠样式表CSS：从审美的角度来描述页面的样式。&lt;/p&gt;
&lt;p&gt;￮ 脚本语言Javascript：控制网页的行为。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.超文本传输协议HTTP&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• HTTP定义了浏览器怎样向万维网服务器请求万维网文档，以及万维网服务器怎样把万维网文档传送给浏览器。&lt;/p&gt;
&lt;p&gt;• HTTP特点：&lt;/p&gt;
&lt;p&gt;￮ HTTP本身是无连接的。&lt;/p&gt;
&lt;p&gt;￮ HTTP是无状态的。（服务器不记得曾经服务过的客户）&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;HTTP/1.0&lt;/strong&gt;采用&lt;strong&gt;非持续连接&lt;/strong&gt;方式。在该方式下，每次浏览器要请求一个文件都要与服务器建立TCP连接，当收到响应后就立即关闭连接。&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;每请求一个文档就要有两倍的RTT****的开销&lt;/strong&gt;。若一个网页上有很多引用对象(例如图片等)，那么请求每一个对象都需要花费2RTT的时间。&lt;/p&gt;
&lt;p&gt;￮ 为了减小时延，&lt;strong&gt;浏览器通常会建立多个并行的TCP连接同时请求多个对象。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps101.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;HTTP/1.1&lt;/strong&gt;采用&lt;strong&gt;持续连接&lt;/strong&gt;方式。在该方式下，万维网服务器在发送响应后仍然&lt;strong&gt;保持这条连接&lt;/strong&gt;，使同一个客户(浏览器)和该服务器可以继续在这条连接上传送后续的HTTP请求报文和响应报文。这  并不局限于传送同一个页面上引用的对象，而是只要这些文档都在同一个服务器上就行。&lt;/p&gt;
&lt;p&gt;￮ 为了进一步提高效率，HTTP/1.1的持续连接还可以使用&lt;strong&gt;流水线&lt;/strong&gt;方式工作，即浏览器在收到HTTP的响应报文之前就能够连续发送多个请求报文。&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;在HTTP相关题目中，如果涉及到MMS的大小，则要考虑拥塞窗口（慢开始）。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• HTTP报文格式：&lt;/p&gt;
&lt;p&gt;￮ HTTP是&lt;strong&gt;面向文本&lt;/strong&gt;的，其报文中的每一个&lt;strong&gt;字段&lt;/strong&gt;都是一些&lt;strong&gt;ASCII码串&lt;/strong&gt;，并且每个字段的&lt;strong&gt;长度&lt;/strong&gt;都是&lt;strong&gt;不确定&lt;/strong&gt;的。&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps102.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/th&gt;
          &lt;th&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps103.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;/td&gt;
          &lt;td&gt;&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;￮ Host字段：主机域名&lt;/p&gt;
&lt;p&gt;￮ Connection字段：是否持续链接&lt;/p&gt;
&lt;p&gt;• HEEP请求报文的方法：&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;GET：从服务器获取资源。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ &lt;strong&gt;POST：向服务器发送数据以创建新资源。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ PUT：向服务器发送数据以创建新资源，若资源不存在则创建新资源。&lt;/p&gt;
&lt;p&gt;￮ DELETE:从服务器删除指定的资源。&lt;/p&gt;
&lt;p&gt;￮ HEAD：类似于GET，但服务器只返回相应的头部，不返回实际数据。&lt;/p&gt;
&lt;p&gt;• 使用Cookie在服务器上记录用户信息&lt;/p&gt;
&lt;p&gt;￮ Cookie提供了一种机制使得万维网服务器能够“记住”用户，而无需用户主动提供用户标识信息。也就是说，&lt;strong&gt;Cookie是一种对无状态的HTTP进行状态化的技术。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;￮ Cookie是有有效期的&lt;/p&gt;
&lt;p&gt;￮ 请求报文中有Cookie说明曾经浏览过该网站。&lt;/p&gt;
&lt;p&gt;• 访问Web时会发生的事件&lt;/p&gt;
&lt;p&gt;a. 浏览器分析链接指向页面的URL(&lt;a class=&#34;link&#34; href=&#34;https://www.tsinghua.edu.cn/chn/index.hem&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.tsinghua.edu.cn/chn/index.hem&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;b. 浏览器向DNS请求解析www.tsinghua.edu.cn的IP地址&lt;/p&gt;
&lt;p&gt;c. 域名系统DNS解析出清华大学服务器 的IP地址&lt;/p&gt;
&lt;p&gt;d. 浏览器与该服务器建立TCP连接&lt;/p&gt;
&lt;p&gt;e. 浏览器发出HTTP请求：GET/chn/index.htm&lt;/p&gt;
&lt;p&gt;f. 服务器通过HTTP响应把文件index.htm发送给浏览器&lt;/p&gt;
&lt;p&gt;g. 释放TCP连接&lt;/p&gt;
&lt;p&gt;h. 浏览器解释文件index.htm，并将Web页显示给用户&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.万维网缓存与代理服务器&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• 万维网缓存又称为&lt;strong&gt;Web缓存&lt;/strong&gt;(WebCache)，可位于客户机，也可位于中间系统上，位于中间系统上的Web缓存又称为&lt;strong&gt;代理服务器&lt;/strong&gt;(Proxy Server)。&lt;/p&gt;
&lt;p&gt;• Web缓存把最近的一些请求和响应暂存在本地磁盘中。&lt;strong&gt;当新请求到达时，若发现这个请求与暂时存放的请求相同，就返回暂存的响应，而不需要按URL的地址再次去因特网访问该资源。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;file:///C:%5cUsers%5cLenovo%5cAppData%5cLocal%5cTemp%5cksohtml38240%5cwps104.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
&gt;&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
